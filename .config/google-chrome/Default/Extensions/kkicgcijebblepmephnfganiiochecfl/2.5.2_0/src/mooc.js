!function(t){var e={};function n(o){if(e[o])return e[o].exports;var r=e[o]={i:o,l:!1,exports:{}};return t[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=t,n.c=e,n.d=function(t,e,o){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(o,r,function(e){return t[e]}.bind(null,r));return o},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=18)}([function(t,e,n){"use strict";var o=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))((function(r,i){function c(t){try{u(o.next(t))}catch(t){i(t)}}function a(t){try{u(o.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(c,a)}u((o=o.apply(t,e||[])).next())}))},r=this&&this.__generator||function(t,e){var n,o,r,i,c={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;c;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return c.label++,{value:i[1],done:!1};case 5:c.label++,o=i[1],i=[0];continue;case 7:i=c.ops.pop(),c.trys.pop();continue;default:if(!(r=c.trys,(r=r.length>0&&r[r.length-1])||6!==i[0]&&2!==i[0])){c=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){c.label=i[1];break}if(6===i[0]&&c.label<r[1]){c.label=r[1],r=i;break}if(r&&c.label<r[2]){c.label=r[2],c.ops.push(i);break}r[2]&&c.ops.pop(),c.trys.pop();continue}i=e.call(t,c)}catch(t){i=[6,t],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}};Object.defineProperty(e,"__esModule",{value:!0}),e.Application=e.AppName=e.Content=e.Frontend=e.Backend=void 0;var i=n(3),c=n(1),a=n(2);e.Backend="backend",e.Frontend="frontend",e.Content="content",e.AppName="cxmooc-tools";var u=function(){function t(e,n,o){t.app=this,t.runEnv=e,this.runEnvSwitch(e),this.launcher=n,this.component=o}return Object.defineProperty(t,"App",{get:function(){return t.app},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"debug",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"prod",{get:function(){return!0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"config",{get:function(){return this.component.get("config")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"log",{get:function(){return this.component.get("logger")},enumerable:!1,configurable:!0}),t.prototype.run=function(){this.launcher.start()},Object.defineProperty(t.prototype,"IsFrontend",{get:function(){return t.IsFrontend},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"IsBackend",{get:function(){return t.IsBackend},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"IsContent",{get:function(){return t.IsContent},enumerable:!1,configurable:!0}),t.prototype.runEnvSwitch=function(n){switch(n){case e.Frontend:t.IsFrontend=!0;break;case e.Backend:t.IsBackend=!0;break;case e.Content:t.IsContent=!0}},Object.defineProperty(t.prototype,"Client",{get:function(){return t.IsFrontend?i.NewChromeClientMessage(e.AppName):i.NewExtensionClientMessage(e.AppName)},enumerable:!1,configurable:!0}),t.CheckUpdate=function(e){t.IsContent?chrome.storage.local.get(["version","enforce","hotversion","url"],(function(t){return o(this,void 0,void 0,(function(){return r(this,(function(n){switch(n.label){case 0:return[4,e(a.SystemConfig.version<t.version,t)];case 1:return n.sent(),[2]}}))}))})):c.HttpUtils.HttpGet(a.SystemConfig.url+"update?ver="+a.SystemConfig.version,{json:!0,success:function(t){return o(this,void 0,void 0,(function(){var n;return r(this,(function(o){switch(o.label){case 0:return n={version:t.version,url:t.url,enforce:t.enforce,hotversion:t.hotversion,injection:t.injection},chrome.storage&&chrome.storage.local.set(n),[4,e(a.SystemConfig.version<n.version,n)];case 1:return o.sent(),[2]}}))}))},error:function(){return o(this,void 0,void 0,(function(){return r(this,(function(t){switch(t.label){case 0:return[4,e(!1,void 0)];case 1:return t.sent(),[2]}}))}))}})},t}();e.Application=u},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Sleep=e.UntrustedClick=e.boolToString=e.toBool=e.Noifications=e.isPhone=e.getImageBase64=e.protocolPrompt=e.dealHotVersion=e.substrex=e.removeHTML=e.removeHTMLTag=e.post=e.get=e.createBtn=e.randNumber=e.RemoveInjected=e.syncSetChromeStorageLocal=e.syncGetChromeStorageLocal=e.InjectedBySrc=e.Injected=e.HttpUtils=void 0;var o=n(0),r=function(){function t(){}return t.Request=function(e){o.Application.App.IsBackend?fetch(e.url,e).then((function(t){return e.json?t.json():t.text()})).then((function(t){e.success&&e.success(t)})).catch((function(){e.error&&e.error()})):t.crossDomainRequest(e)},t.errorCode=function(t){if(!t.code)return!1;switch(t.code){case-1:o.Application.App.log.Info(t.msg);break;case-2:o.Application.App.log.Warn(t.msg);break;case 1:return o.Application.App.log.Info(t.msg),!1;default:return!1}return!0},t.crossDomainRequest=function(e){if(window.hasOwnProperty("GM_xmlhttpRequest"))e.data=e.body,e.onreadystatechange=function(n){if(4==n.readyState)if(200==n.status)if(e.json){var o=JSON.parse(n.responseText);if(t.errorCode(o))return void(e.error&&e.error());e.success&&e.success(o)}else e.success&&e.success(n.responseText);else e.error&&e.error()},window.GM_xmlhttpRequest(e);else{var n=o.Application.App.Client;n.Recv((function(n){if(0==n.code){if(e.json&&t.errorCode(n.body))return void(e.error&&e.error());e.success&&e.success(n.body)}else e.error&&e.error()})),n.Send({type:"GM_xmlhttpRequest",info:{url:e.url,method:e.method,json:e.json,body:e.body,headers:e.headers}})}},t.HttpGet=function(t,e){e.url=t,this.Request(e)},t.HttpPost=function(t,e,n){n.url=t,n.body=e,n.headers||(n.headers={}),n.headers["Content-Type"]||(n.headers["Content-Type"]="application/x-www-form-urlencoded"),n.method="POST",this.Request(n)},t.SendRequest=function(e,n){if(n.info){var r=n.info;if(o.Application.App.IsBackend)r.success=function(t){e.Send({body:t,code:0})},r.error=function(){e.Send({code:-1})},t.Request(r);else{var i=o.Application.App.Client;i.Send({type:"GM_xmlhttpRequest",info:r}),i.Recv((function(t){e.Send(t)}))}}},t}();function i(){var t;return(t=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP")).error=function(e){return t.errorCallback=e,t},t.withCredentials=!0,t}e.HttpUtils=r,e.Injected=function(t,e){var n=t.createElement("script");return n.setAttribute("type","text/javascript"),n.innerHTML=e,n.className="injected-js",t.documentElement.appendChild(n),n},e.InjectedBySrc=function(t,e){var n=t.createElement("script");return n.setAttribute("type","text/javascript"),n.src=e,n.className="injected-js",t.documentElement.appendChild(n),n},e.syncGetChromeStorageLocal=function(t){return new Promise((function(e){return chrome.storage.local.get(t,(function(n){e(n[t])}))}))},e.syncSetChromeStorageLocal=function(t,e){var n={};return n[t]=e,new Promise((function(t){return chrome.storage.local.set(n,(function(){t()}))}))},e.RemoveInjected=function(t){for(var e=t.getElementsByClassName("injected-js"),n=0;n<e.length;n++)e[n].remove()},e.randNumber=function(t,e){return Math.floor(Math.random()*(e-t+1)+t)},e.createBtn=function(t,e,n,o){void 0===e&&(e=""),void 0===n&&(n=""),void 0===o&&(o="");var r=document.createElement("button");return r.innerText=t,r.id=o,r.title=e,r.className=n,r},e.get=function(t,e){var n=i();return n.open("GET",t,!0),n.onreadystatechange=function(){4==this.readyState&&(200==this.status?e&&e(this.responseText,this.resource):n.errorCallback&&n.errorCallback(this))},n.send(),n},e.post=function(t,e,n,o){void 0===n&&(n=!0);var r=i();return r.open("POST",t,!0),n?r.setRequestHeader("Content-Type","application/json"):r.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),r.onreadystatechange=function(){4==this.readyState&&(200==this.status?o&&o(this.responseText):r.errorCallback&&r.errorCallback(this))},r.send(e),r},e.removeHTMLTag=function(t){return t=(t=t.replace(/<.*?>/g,"")).replace(/(^\s+)|(\s+$)/g,"")},e.removeHTML=function(t){var e=/<img.*?src="(.*?)".*?>/g;return t=t.replace(e,"$1"),e=/(<iframe.+?>)\s+?(<\/iframe>)/g,t=t.replace(e,"$1$2"),e=/<(iframe|a).*?(src|href)="(.*?)".*?>(.*?)<\/(iframe|a)>/g,(t=(t=(t=(t=t.replace(e,"$3$4")).replace(/<.*?>/g,"")).replace(/(^\s+)|(\s+$)/g,"")).replace(/，/g,",").replace(/（/g,"(").replace(/）/g,")").replace(/？/g,"?").replace(/：/g,":").replace(/。/g,".").replace(/[“”]/g,'"')).replace(/&nbsp;/g," ").replace(/&quot;/g,'"').replace(/&gt;/g,">").replace(/&lt;/g,"<").replace(/&amp;/g,"&").trim()},e.substrex=function(t,e,n){var o=t.indexOf(e)+e.length,r=t.indexOf(n,o);return t.substring(o,r)},e.dealHotVersion=function(t){return t=t.substring(0,t.indexOf(".")+1)+t.substring(t.indexOf(".")+1).replace(".",""),Number(t)},e.protocolPrompt=function(t,e,n){if(n=n||"yes",null==localStorage[e]||1!=localStorage[e]){var o=prompt(t+'\n如果以后不想再弹出本对话框并且同意请在下方填写"'+n+'"');if(null===o)return!1;if(n!=o)return!1;localStorage[e]=1}return!0},e.getImageBase64=function(t,e){var n=document.createElement("canvas");n.width=t.width,n.height=t.height,n.getContext("2d").drawImage(t,0,0,t.width,t.height);var o=n.toDataURL("image/"+e,.75);return n=null,o},e.isPhone=function(){return/Android|iPhone/i.test(navigator.userAgent)},e.Noifications=function(t){window.hasOwnProperty("GM_notification")?window.GM_notification(t):(o.Application.App.Client.Send({type:"GM_notification",details:t}),o.Application.App.Client.Send(t))},e.toBool=function(t){return"boolean"==typeof t?t:"true"==t},e.boolToString=function(t){return t?"true":"false"},e.UntrustedClick=function(t){if(null!=window.CAT_click)return CAT_click(t),!0;var e=new MouseEvent("click",{clientX:10086});return e.isTrusted?t.dispatchEvent(e):(o.Application.App.log.Warn("扩展执行错误"),!1)},e.Sleep=function(t){return new Promise((function(e){setTimeout((function(){e(void 0)}),t)}))}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SystemConfig=void 0;var o=function(){function t(){}return t.version=2.5,t.url="https://cx.icodef.com/",t.hotVersion="2.5.2",t.match={cx:["*://*/mycourse/studentstudy?*","*://*/work/doHomeWorkNew?*","*://*/work/selectWorkQuestionYiPiYue?*","*://*/exam/test/reVersionTestStartNew?*","*://*/ztnodedetailcontroller/visitnodedetail?*","*://*/antispiderShowVerify.ac*","*://*/html/processVerify.ac?*","*://*/exam/test/reVersionPaperMarkContentNew?*","*://*/ananas/modules/*/index.html?*","*://*/exam/test?*","*://*/course/*.html?*"],zhs:["*://examh5.zhihuishu.com/stuExamWeb.html*","*://onlineexamh5new.zhihuishu.com/stuExamWeb.html*","*://studyh5.zhihuishu.com/videoStudy.html*"],mooc163:["*://www.icourse163.org/learn/*","*://www.icourse163.org/spoc/learn/*"]},t.config={cx:{name:"超星",items:[{title:"随机答案",description:"如果题库没有正确的答案会随机选择",type:"checkbox",key:"rand_answer",value:!1},{title:"自动挂机",description:"进入一个页面就会自动开始挂机,完成一个任务之后会自动进行下一个",type:"checkbox",key:"auto",value:!0},{title:"视频静音",description:"播放视频时,自动开启静音",type:"checkbox",key:"video_mute",value:!0},{title:"忽略题目",description:"自动挂机时,忽略掉题目不做,直接跳过",type:"checkbox",key:"answer_ignore",value:!1},{title:"超级模式",description:"超星平台下,超级模式会自动将flash播放器换成h5播放器",type:"checkbox",key:"super_mode",value:!0},{title:"播放源",description:"锁定视频播放源,为空为记录最后一次选中的源(公网1,公网2等)",type:"text",key:"video_cdn",value:"默认"},{title:"播放倍速",description:"视频播放的倍数,1为正常速度(最高16倍,该功能有一定危险)",type:"text",key:"video_multiple",prompt:"这是一个很危险的功能,建议不要进行调整,如果你想调整播放速度请在下方填写yes(智慧树平台播放速度和视频进度无关,最高只能1.5倍速)",unit:"倍",value:"1"},{title:"跳转间隔",description:"视频(题目,任务点)完成后n分钟再继续下一个任务,可以有小数点,例如:0.5=30秒",type:"text",key:"interval",unit:"分",value:"1"},{title:"做题间隔",description:"每一道题之间填写答案的时间间隔",type:"text",key:"topic_interval",unit:"秒",value:"5"}]},zhs:{name:"智慧树",items:[{title:"随机答案",description:"如果题库没有正确的答案会随机选择",type:"checkbox",key:"rand_answer",value:!1},{title:"自动挂机",description:"进入一个页面就会自动开始挂机,完成一个任务之后会自动进行下一个",type:"checkbox",key:"auto",value:!0},{title:"视频静音",description:"播放视频时,自动开启静音",type:"checkbox",key:"video_mute",value:!0},{title:"超级模式",description:"智慧树平台下,超级模式会让任务完成的倍速成真",type:"checkbox",key:"super_mode",value:!0},{title:"播放倍速",description:"视频播放的倍数,1为正常速度(最高16倍,该功能有一定危险)",type:"text",key:"video_multiple",prompt:"这是一个很危险的功能,建议不要进行调整,如果你想调整播放速度请在下方填写yes(智慧树平台播放速度和视频进度无关,最高只能1.5倍速)",unit:"倍",value:"1"},{title:"跳转间隔",description:"视频完成后n分钟再继续播放下一个,可以有小数点,例如:0.5=30秒",type:"text",key:"interval",unit:"分",value:"1"},{title:"做题间隔",description:"每一道题之间填写答案的时间间隔",type:"text",key:"topic_interval",unit:"秒",value:"5"}]},mooc163:{name:"中国大学MOOC",items:[{title:"随机答案",description:"如果题库没有正确的答案会随机选择",type:"checkbox",key:"rand_answer",value:!1},{title:"自动挂机",description:"进入一个页面就会自动开始挂机,完成一个任务之后会自动进行下一个",type:"checkbox",key:"auto",value:!0},{title:"视频静音",description:"播放视频时,自动开启静音",type:"checkbox",key:"video_mute",value:!0},{title:"忽略题目",description:"自动挂机时,忽略掉题目不做,直接跳过",type:"checkbox",key:"answer_ignore",value:!1},{title:"播放倍速",description:"视频播放的倍数,1为正常速度(最高16倍,该功能有一定危险)",type:"text",key:"video_multiple",prompt:"这是一个很危险的功能,建议不要进行调整,如果你想调整播放速度请在下方填写yes(智慧树平台播放速度和视频进度无关,最高只能1.5倍速)",unit:"倍",value:"1"},{title:"跳转间隔",description:"视频完成后n分钟再继续播放下一个,可以有小数点,例如:0.5=30秒",type:"text",key:"interval",unit:"分",value:"1"},{title:"做题间隔",description:"每一道题之间填写答案的时间间隔",type:"text",key:"topic_interval",unit:"秒",value:"5"}]}},t}();e.SystemConfig=o},function(t,e,n){"use strict";var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.NewChromeClientMessage=e.NewChromeServerMessage=e.NewExtensionClientMessage=e.NewExtensionServerMessage=void 0,e.NewExtensionServerMessage=function(t){return new i(t)};var i=function(){function t(t){this.port=t,this.recv()}return t.prototype.recv=function(){var t=this;chrome.runtime.onConnect.addListener((function(e){e.name==t.port&&e.onMessage.addListener((function(n){t.acceptCallback(new a(e),n)}))}))},t.prototype.Accept=function(t){this.acceptCallback=t},t}(),c=function(){function t(t){this.tag=t}return t.prototype.Recv=function(t){this.recvCallback=t},t}();e.NewExtensionClientMessage=function(t){return new a(t)};var a=function(t){function e(e){var n=this;return"string"==typeof e?(n=t.call(this,e)||this).connect():n.conn=e,n.recv(),n}return r(e,t),e.prototype.connect=function(){this.conn=chrome.runtime.connect({name:this.tag})},e.prototype.recv=function(){var t=this;this.conn.onMessage.addListener((function(e){t.recvCallback(e)}))},e.prototype.Send=function(t){this.conn.postMessage(t)},e}(c);e.NewChromeServerMessage=function(t){return new u(t)};var u=function(){function t(t){this.tag=t,this.recv()}return t.prototype.recv=function(){var t=this;window.addEventListener("message",(function(e){e.data.tag==t.tag&&e.data.conn_tag&&"client"==e.data.source&&t.acceptCallback(new s(t.tag,e.data.conn_tag),e.data.msg)}))},t.prototype.Accept=function(t){this.acceptCallback=t},t}();e.NewChromeClientMessage=function(t){return new s(t)};var s=function(t){function e(e,n){var o=this;return void 0!==n?((o=t.call(this,e)||this).connTag=n,o.source="server"):((o=t.call(this,e)||this).connect(),o.source="client"),o}return r(e,t),e.prototype.connect=function(){var t=this;this.connTag=Math.random(),window.addEventListener("message",(function(e){e.data.tag==t.tag&&e.data.conn_tag==t.connTag&&"server"==e.data.source&&t.recvCallback&&t.recvCallback(e.data.msg)}))},e.prototype.Send=function(t){window.postMessage({tag:this.tag,conn_tag:this.connTag,msg:t,source:this.source},"*")},e}(c)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CreateNoteLine=e.CssBtn=void 0,e.CssBtn=function(t){return t.style.outline="none",t.style.border="0",t.style.background="#7d9d35",t.style.color="#fff",t.style.borderRadius="4px",t.style.padding="2px 8px",t.style.cursor="pointer",t.style.fontSize="12px",t.style.marginLeft="4px",t.onmousemove=function(){t.style.boxShadow="1px 1px 1px 1px #ccc"},t.onmouseout=function(){t.style.boxShadow=""},t},e.CreateNoteLine=function(t,e,n,o){var r=document.createElement("p");return r.style.color="red",r.style.fontSize="14px",r.className="prompt-line-"+e,r.innerHTML=t,null!=n&&n.append(r),null!=o&&o.after(r),r}},function(t,e){window.addEventListener("load",(function(){var t=document.createElement("style");t.innerHTML='\n@keyframes aniripple  \n{\n    0%{\n        width:0px;\n        height:0px;\n        opacity:0.4;\n    }\n    100%{\n        width:500px;\n        height:500px;\n        opacity:0;\n    }\n}  \n\n#cxtools {\n    position: absolute;\n    left: 250px;\n    top: 2px;\n    width: 210px;\n    font-size: 0;\n}\n\n.cx-btn {\n    outline: none;\n    border: 0;\n    background: #7d9d35;\n    color: #fff;\n    border-radius: 4px;\n    padding: 2px 8px;\n    cursor: pointer;\n    font-size: 12px;\n    margin-left: 4px;\n}\n\n.cx-btn:hover {\n    box-shadow: 1px 1px 1px 1px #ccc;\n}\n\n.zhs-tools-btn {\n    color: #fff;\n    background: #ff9d34;\n    padding: 4px;\n    display: inline-block;\n    height: 24px;\n    font-size: 14px;\n    line-height: 24px;\n    margin:0;\n    cursor:pointer;\n}\n.btn-ripple{\n    position:absolute;\n    background:#000;\n    pointer-events:none;\n    transform:translate(-50%,-50%);\n    border-radius:50%;\n    animation:aniripple 1s linear infinite;\n}\n\n.zhs-start-btn{\n    background: #36ac36;\n}\n\n.zhs-start-btn:hover{\n    background: #3b8d3b;\n}\n\n#zhs-ytbn {\n    color: #fff;\n    background: #e777ff;\n}\n\n#zhs-ytbn:hover {\n    background: #e7b7f1;\n}\n\n.zhs-search-answer {\n    border: 0;\n    outline: none;\n    padding: 4px;\n}\n\n.zhs-search-answer:hover {\n    opacity: .85;\n}\n\n.mooc163-search{\n    background-color: #60b900;\n    display: block;\n    margin: 0 auto;\n}\n\n.tools-logger-panel{\n    width: 360px;\n    height: auto;\n    max-height: 260px;\n    color:#000;\n    position: fixed;\n    margin: 0 auto;\n    display: block;\n    font-size: 14px;\n    border-radius: 4px;\n    width: 340px;\n    text-align: center;\n    overflow: hidden;\n    left:60px;\n    top: 40px;\n    z-index: 100000;\n    background: rgba(256, 256, 256, 0.3);\n    box-shadow: 0px 0px 5px #bbb;\n}\n\n.head {\n    width: 100%;\n    height: 30px;\n    padding: 4px;\n    box-sizing: border-box;\n    cursor: move;\n    transition-property: opacity, background-color;\n    transition: 200ms ease-in-out;\n}\n\n.head span{\n    color:#000;\n    float:left;\n    font-weight: 550;\n}\n\n.status {\n    color: #67C23A;\n    font-weight: 600;\n}\n\n.tools-notice-content {\n    width: 100%;\n    height: 220px;\n    border-top:0px;\n    overflow-y: scroll;\n    overflow-x: hidden;\n}\n\n.tools-notice-content .log {\n    height: auto;\n    width: auto;\n    text-align: center;\n    border: 1px solid #eee;\n    overflow: hidden;\n}\n\n.tools-notice-content .log p {\n    margin: 0;\n    color: #aaa;\n    font-size: 11px;\n    font-weight: 500;\n    font-family: Arial, Helvetica, sans-serif;\n    line-height: 26px;\n}\n\n/* 滚动槽 */\n::-webkit-scrollbar {\n    width: 10px;\n    height: 10px;\n}\n\n::-webkit-scrollbar-track {\n    border-radius: 3px;\n    background: rgba(0, 0, 0, 0.06);\n    -webkit-box-shadow: inset 0 0 5px rgba(0, 0, 0, 0.08);\n}\n\n/* 滚动条滑块 */\n::-webkit-scrollbar-thumb {\n    border-radius: 3px;\n    background: rgba(0, 0, 0, 0.12);\n    -webkit-box-shadow: inset 0 0 10px rgba(0, 0, 0, 0.2);\n}\n\n/* 复选框 */\n.switch {\n    margin: 2px auto;\n    display: inline-flex;\n    align-items: center;\n    width: auto;\n}\n.checkbox-input {\n    display: none\n}\n.checkbox {\n    -webkit-transition: background-color 0.3s;\n    transition: background-color 0.3s;\n    background-color: #fff;\n    border: 1px solid #d7d7d7;\n    border-radius: 50px;\n    width: 16px;\n    height: 16px;\n    vertical-align:middle;\n    margin: 0 5px;\n}\n.checkbox-input:checked+.checkbox {\n    background-color: #409EFF;\n}\n.checkbox-input:checked+.checkbox:after {\n    // content: "√";\n    display: inline-block;\n    height: 100%;\n    width: 100%;\n    color: #fff;\n    text-align: center;\n    line-height: 16px;\n    font-size: 12px;\n    box-shadow: 0 0 4px #409EFF;\n}\n\n.tools-logger-panel:hover,\n.tools-logger-panel:focus-within {\n    background: rgba(256, 256, 256, 0.7);\n}\n\n.tools-logger-panel .head:active {\n    background-color: #E5E5E5;\n}\n\n.tools-logger-panel > .close {\n    margin: 2px;\n}\n\n',document.body.appendChild(t)}))},function(t,e,n){"use strict";var o=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))((function(r,i){function c(t){try{u(o.next(t))}catch(t){i(t)}}function a(t){try{u(o.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(c,a)}u((o=o.apply(t,e||[])).next())}))},r=this&&this.__generator||function(t,e){var n,o,r,i,c={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;c;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return c.label++,{value:i[1],done:!1};case 5:c.label++,o=i[1],i=[0];continue;case 7:i=c.ops.pop(),c.trys.pop();continue;default:if(!(r=c.trys,(r=r.length>0&&r[r.length-1])||6!==i[0]&&2!==i[0])){c=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){c.label=i[1];break}if(6===i[0]&&c.label<r[1]){c.label=r[1],r=i;break}if(r&&c.label<r[2]){c.label=r[2],c.ops.push(i);break}r[2]&&c.ops.pop(),c.trys.pop();continue}i=e.call(t,c)}catch(t){i=[6,t],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}};Object.defineProperty(e,"__esModule",{value:!0}),e.NewFrontendGetConfig=e.NewBackendConfig=e.ChromeConfigItems=void 0;var i=n(1),c=n(0),a=n(2),u=new Map;for(var s in u.set("vtoken",""),a.SystemConfig.config)for(var l=0;l<a.SystemConfig.config[s].items.length;l++)u.set(s+"_"+a.SystemConfig.config[s].items[l].key,a.SystemConfig.config[s].items[l].value);var p=function(){function t(t){var e=this;this.Namespace="",this.config=t;var n=[];u.forEach((function(t,e){n.push(e)})),this.config.Watch(n,(function(t,n){e.localCache[t]=n})),this.localCache=localStorage}return t.prototype.SetNamespace=function(t){this.Namespace=t+"_"},t.prototype.ConfigList=function(){return this.config.ConfigList()},t.prototype.SetNamespaceConfig=function(t,e,n){return this.config.SetConfig(t+"_"+e,n)},t.prototype.GetNamespaceConfig=function(t,e,n){return this.config.GetConfig(t+"_"+e,n)},t.prototype.GetConfig=function(t,e){var n=this.config.GetConfig(this.Namespace+t);return null==n?this.config.GetConfig(t,e):n||e},t.prototype.Watch=function(t,e){this.config.Watch(t,e)},Object.defineProperty(t.prototype,"super_mode",{get:function(){return i.toBool(this.GetConfig("super_mode","true"))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"vtoken",{get:function(){return this.GetConfig("vtoken","")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"rand_answer",{get:function(){return i.toBool(this.GetConfig("rand_answer","false"))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"auto",{get:function(){return i.toBool(this.GetConfig("auto","true"))},set:function(t){this.SetConfig("auto",i.boolToString(t))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"video_mute",{get:function(){return i.toBool(this.GetConfig("video_mute","true"))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"answer_ignore",{get:function(){return i.toBool(this.GetConfig("answer_ignore","false"))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"video_cdn",{get:function(){var t=this.GetConfig("video_cdn");return"默认"==t?"":t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"video_multiple",{get:function(){return parseFloat(this.GetConfig("video_multiple"))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"interval",{get:function(){var t=parseFloat(this.GetConfig("interval","0.1"));return t*=100,Math.floor(i.randNumber(t-t/2,t+t/2))/100},enumerable:!1,configurable:!0}),t.prototype.SetConfig=function(t,e){return this.config.SetConfig(this.Namespace+t,e)},Object.defineProperty(t.prototype,"topic_interval",{get:function(){return parseInt(this.GetConfig("topic_interval","5"))},set:function(t){this.SetConfig("topic_interval",t)},enumerable:!1,configurable:!0}),t}();e.ChromeConfigItems=p,e.NewBackendConfig=function(){var t=this;return new Promise((function(e){return o(t,void 0,void 0,(function(){var t;return r(this,(function(n){switch(n.label){case 0:return[4,(t=new d).updateCache()];case 1:return n.sent(),e(t),[2]}}))}))}))};var f=function(){function t(){this.watchCallback=new Map}return t.prototype.WatchEvent=function(t,e){var n=this.watchCallback.get(t);null!=n&&n.forEach((function(n){n(t,e)})),null!=(n=this.watchCallback.get("*"))&&n.forEach((function(n){n(t,e)}))},t.prototype.Watch=function(t,e){var n=this;"string"!=typeof t?t.forEach((function(t,o){n.setWatchMap(t,e)})):this.setWatchMap(t,e)},t.prototype.setWatchMap=function(t,e){var n=this.watchCallback.get(t);null==n&&(n=new Array),n.push(e),this.watchCallback.set(t,n)},t}(),d=function(){function t(){var t=this;this.watch=new f,chrome.runtime.onMessage.addListener((function(e){e.type&&"cxconfig"==e.type&&(t.cache[e.key]=e.value,t.watch.WatchEvent(e.key,e.value),t.updateConfigStorage())}))}return t.prototype.updateConfigStorage=function(){var t=JSON.stringify(this.cache);chrome.storage.sync.set({config_storage:t})},t.prototype.updateCache=function(){var t=this;return new Promise((function(e){chrome.storage.sync.get("config_storage",(function(n){n.config_storage?t.cache=JSON.parse(n.config_storage):t.cache={},u.forEach((function(e,n){void 0===t.cache[n]&&(t.cache[n]=e)})),t.updateConfigStorage(),e(void 0)}))}))},t.prototype.GetConfig=function(t,e){return null==this.cache?(c.Application.App.log.Fatal("缓存失败!!!"),""):this.cache[t]||e},t.prototype.Watch=function(t,e){return this.watch.Watch(t,e)},t.prototype.SetConfig=function(t,e){var n=this;return new Promise((function(o){n.cache[t]=e,chrome.tabs.query({active:!0,currentWindow:!0},(function(n){chrome.tabs.sendMessage(n[0].id,{type:"cxconfig",key:t,value:e})})),chrome.runtime.sendMessage({type:"cxconfig",key:t,value:e}),n.updateConfigStorage(),o(void 0)}))},t.prototype.ConfigList=function(){var t=this;return new Promise((function(e){return o(t,void 0,void 0,(function(){return r(this,(function(t){switch(t.label){case 0:return this.cache?[2,e(this.cache)]:[4,this.updateCache()];case 1:return t.sent(),e(this.cache),[2]}}))}))}))},t}();e.NewFrontendGetConfig=function(){return new h};var h=function(){function t(){var t=this;this.watch=new f,this.cache=window.configData||localStorage,window.addEventListener("message",(function(e){e.data.type&&"cxconfig"==e.data.type&&(c.Application.App.log.Info("配置更新:"+e.data.key+"="+e.data.value),t.cache[e.data.key]=e.data.value,t.watch.WatchEvent(e.data.key,e.data.value))}))}return t.prototype.GetConfig=function(t,e){return window.GM_getValue?window.GM_getValue(t,e):this.cache[t]||e},t.prototype.Watch=function(t,e){return this.watch.Watch(t,e)},t.prototype.SetConfig=function(t,e){return o(this,void 0,void 0,(function(){return r(this,(function(n){return this.cache[t]=e,window.GM_setValue?[2,window.GM_setValue(t,e)]:[2,c.Application.App.Client.Send({type:"GM_setValue",details:{key:t,val:e}})]}))}))},t.prototype.ConfigList=function(){return this.cache},t}()},function(t,e,n){"use strict";var o=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))((function(r,i){function c(t){try{u(o.next(t))}catch(t){i(t)}}function a(t){try{u(o.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(c,a)}u((o=o.apply(t,e||[])).next())}))},r=this&&this.__generator||function(t,e){var n,o,r,i,c={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;c;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return c.label++,{value:i[1],done:!1};case 5:c.label++,o=i[1],i=[0];continue;case 7:i=c.ops.pop(),c.trys.pop();continue;default:if(!(r=c.trys,(r=r.length>0&&r[r.length-1])||6!==i[0]&&2!==i[0])){c=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){c.label=i[1];break}if(6===i[0]&&c.label<r[1]){c.label=r[1],r=i;break}if(r&&c.label<r[2]){c.label=r[2],c.ops.push(i);break}r[2]&&c.ops.pop(),c.trys.pop();continue}i=e.call(t,c)}catch(t){i=[6,t],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}};Object.defineProperty(e,"__esModule",{value:!0}),e.ToolsQuestionBankFacade=e.ToolsQuestionBank=e.SwitchTopicType=e.QuestionStatusString=e.TopicStatusString=e.PushAnswer=void 0;var i=n(1),c=n(2),a=n(0),u=function(){function t(){}return t.prototype.Equal=function(t,e){return t==e},t}();e.PushAnswer=u;var s=new Map;s.set("ok","搜索成功").set("random","随机答案").set("no_support_random","不支持的随机答案类型").set("no_answer","题库中没有搜索到答案").set("no_match","题库中没有符合的答案");var l=new Map;l.set("success","搜索成功").set("network","题库网络错误").set("incomplete","题库不全").set("processing","搜索中..."),e.TopicStatusString=function(t){return s.get(t)||"未知错误"},e.QuestionStatusString=function(t){return l.get(t)||"未知错误"},e.SwitchTopicType=function(t){switch(t){case"单选题":return 1;case"多选题":return 2;case"判断题":return 3;case"填空题":return 4;default:return null}};var p=function(){function t(t,e){this.platform=t,this.info=e}return t.prototype.SetInfo=function(t){this.info=t},t.prototype.GetInfo=function(){return encodeURIComponent(JSON.stringify(this.info))},t.prototype.Answer=function(t,e){var n=this;a.Application.App.log.Debug("答案查询",t);var u=new Array,s="success",l=function(p){for(var f="info="+n.GetInfo()+"&",d=p;d<p+20&&d<t.length;d++){var h=t[d];f+="topic["+(d-p)+"]="+encodeURIComponent(h.topic)+"&type["+(d-p)+"]="+h.type+"&"}i.HttpUtils.HttpPost(c.SystemConfig.url+"v2/answer?platform="+n.platform,f,{headers:{Authorization:a.Application.App.config.vtoken,"X-Version":c.SystemConfig.version.toString()},json:!0,success:function(i){return o(n,void 0,void 0,(function(){var n,o,c,a;return r(this,(function(r){switch(r.label){case 0:for(n="success",o=new Array,c=0;c<i.length;c++)null==i[c].result||i[c].result.length<=0?(o.push({index:p+i[c].index,topic:i[c].topic,type:-1,status:"no_answer",answers:null,correct:null,Equal:this.Equal}),n="incomplete"):(a=i[c].result[0],o.push({index:p+i[c].index,topic:a.topic,type:a.type,correct:a.correct,status:"ok",Equal:this.Equal}));return u=u.concat(o),"success"!=n&&(s=n),[4,e({status:"processing",answer:o})];case 1:return r.sent(),d<t.length?(l(d),[2]):[2,e({status:s,answer:u})]}}))}))},error:function(){return e({status:"network",answer:u})}})};l(0)},t.prototype.Push=function(t){var e=this;return new Promise((function(n){a.Application.App.log.Debug("采集提交",t),i.HttpUtils.HttpPost(c.SystemConfig.url+"answer?platform="+e.platform,"info="+e.GetInfo()+"&data="+encodeURIComponent(JSON.stringify(t)),{headers:{Authorization:a.Application.App.config.vtoken,"X-Version":c.SystemConfig.version.toString()},json:!0,success:function(t){a.Application.App.log.Info("答案自动记录成功,成功获得"+t.add_token_num+"个打码数,剩余数量:"+t.token_num),n("success")},error:function(){n("network")}})}))},t.prototype.Equal=function(t,e){return i.removeHTML(t)==i.removeHTML(e)},t.prototype.CheckCourse=function(t){var e=this;return new Promise((function(n){t=t||[e.info],i.HttpUtils.HttpPost(c.SystemConfig.url+"v2/check?platform="+e.platform,"info="+encodeURIComponent(JSON.stringify(t)),{headers:{Authorization:a.Application.App.config.vtoken,"X-Version":c.SystemConfig.version.toString()},success:function(){n(0)},error:function(){n(-1)}}),n()}))},t}();e.ToolsQuestionBank=p;var f=function(){function t(t,e){this.bank="string"==typeof t?new p(t,e):t,this.question=new Array}return t.prototype.ClearQuestion=function(){this.question=new Array},t.prototype.AddQuestion=function(t){this.question.push(t)},t.prototype.Answer=function(t){var e=this,n=new Array;this.question.forEach((function(t){var e=t.GetType();-1!=e&&n.push({topic:t.GetTopic(),type:e})}));var c="success";this.bank.Answer(n,(function(n){return new Promise((function(u){return o(e,void 0,void 0,(function(){var e,o,s,l,p;return r(this,(function(r){switch(r.label){case 0:if("processing"!=n.status)return a.Application.App.log.Debug("题库返回",n),"success"!=n.status||"success"==c?(t(n.status),[2,u()]):(t(c),[2,u()]);e=1e3*a.Application.App.config.topic_interval,o=0,r.label=1;case 1:return o<n.answer.length?(s=n.answer[o],l=this.question[s.index],p=s.status,"no_answer"!=s.status?[3,3]:(c=this.randAnswer(c,p,l),[4,i.Sleep(e)])):[3,11];case 2:return r.sent(),[3,10];case 3:return s.type==l.GetType()?[3,4]:(p="no_match",[3,6]);case 4:return[4,l.Fill(s)];case 5:p=r.sent(),r.label=6;case 6:return"no_match"!=p?[3,8]:(c=this.randAnswer(c,p,l),[4,i.Sleep(e)]);case 7:return r.sent(),[3,10];case 8:return l.SetStatus(p),o<n.answer.length-1?[4,i.Sleep(e)]:[3,10];case 9:r.sent(),r.label=10;case 10:return o++,[3,1];case 11:return[2,u()]}}))}))}))}))},t.prototype.randAnswer=function(t,e,n){return a.Application.App.config.rand_answer?e=n.Random():t="incomplete","no_support_random"==e&&(t="incomplete"),n.SetStatus(e),t},t.prototype.Push=function(t){var e=new Array;this.question.forEach((function(t){var n=t.Correct();null!=n&&null!=n.correct&&-1!=n.type&&e.push(n)})),this.bank.Push(e).then((function(e){return a.Application.App.log.Debug("题库返回",e),t(e)}))},t.prototype.dealOption=function(t){for(var e=0;e<t.length;e++)"string"==typeof t[e].content&&(t[e].content=t[e].content);return t},t.prototype.CheckCourse=function(){return this.bank.CheckCourse()},t}();e.ToolsQuestionBankFacade=f},function(t,e,n){"use strict";var o=this&&this.__spreadArrays||function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var o=Array(t),r=0;for(e=0;e<n;e++)for(var i=arguments[e],c=0,a=i.length;c<a;c++,r++)o[r]=i[c];return o};Object.defineProperty(e,"__esModule",{value:!0}),e.EmptyLog=e.PageLog=e.ConsoleLog=void 0;var r=n(0);n(5);var i=n(1),c=function(){function t(){}return t.prototype.getNowTime=function(){var t=new Date;return t.getHours()+":"+t.getMinutes()+":"+t.getSeconds()},t.prototype.Debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return r.Application.App.debug&&console.info.apply(console,o(["[debug",this.getNowTime(),"]"],t)),this},t.prototype.Info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return r.Application.App.debug&&console.info.apply(console,o(["[info",this.getNowTime(),"]"],t)),this},t.prototype.Warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return console.warn.apply(console,o(["[warn",this.getNowTime(),"]"],t)),this},t.prototype.Error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return console.error.apply(console,o(["[error",this.getNowTime(),"]"],t)),this},t.prototype.Fatal=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return console.error.apply(console,o(["[fatal",this.getNowTime(),"]"],t)),this},t}();e.ConsoleLog=c;var a=function(){function t(){var t=this;this.el=void 0,window.addEventListener("load",(function(){t.div=document.createElement("div"),t.div.innerHTML='\n            <div class="head" id="tools-head"> \n               <span>小工具通知条</span> \n               <label class="switch" style="width:90px">\n                  <input class="checkbox-input" id="checkbox" type="checkbox" checked="checked">\n                  <label class="checkbox" for="checkbox"></label>\n                  <span>桌面通知</span>\n               </label>\n               <span class="close" style="float:right; cursor:pointer; margin-right:5px;">x</span>\n            </div>\n            <div class="main">\n               <div class="tools-notice-content"></div>\n            </div>\n            ',t.div.className="tools-logger-panel",document.body.appendChild(t.div),t.el=t.div.querySelector(".tools-notice-content"),t.div.querySelector(".close").onclick=function(){t.el=void 0,t.div.remove()};var e=t.div.querySelector("#checkbox");e.checked="true"==(r.Application.App.config.GetConfig("is_notify")||"true"),t.is_notify=e.checked,e.checked||e.removeAttribute("checked");var n=t;function o(t,e){return parseInt(window.getComputedStyle(t)[e])}e.addEventListener("change",(function(){n.is_notify=this.checked,r.Application.App.config.SetConfig("is_notify",this.checked.toString())})),setTimeout((function(){r.Application.CheckUpdate((function(e,n){if(null!=n){var o="";e&&(o+="<span>[有新版本]</span>"),o+=n.injection,t.Info(o)}else t.Info("检查更新失败.")}))}),1e3);var i=window.innerWidth,c=window.innerHeight,a=o(t.div,"width"),u=o(t.div,"height"),s=parseInt(r.Application.App.config.GetConfig("notify_tools_x").replace("px",""));s<0&&(s=0),s>=i-a&&(s=i-a),t.div.style.left=s+"px";var l=parseInt(r.Application.App.config.GetConfig("notify_tools_y").replace("px",""));l<0&&(l=0),l>=c-u&&(l=c-u),t.div.style.top=l+"px",t.div.querySelector("#tools-head").onmousedown=function(e){var n=e.clientX-t.div.offsetLeft,i=e.clientY-t.div.offsetTop,c=window.innerWidth,a=window.innerHeight,u=o(t.div,"width"),s=o(t.div,"height");document.onmousemove=function(e){var o=e.clientX-n,r=e.clientY-i;o<=0&&(o=0),r<=0&&(r=0),o>=c-u&&(o=c-u),r>=a-s&&(r=a-s),t.div.style.left=o+"px",t.div.style.top=r+"px"},document.onmouseup=function(){document.onmouseup=null,document.onmousemove=null,r.Application.App.config.SetConfig("notify_tools_x",t.div.style.left),r.Application.App.config.SetConfig("notify_tools_y",t.div.style.top)}}}))}return t.prototype.getNowTime=function(){var t=new Date;return t.getHours()+":"+t.getMinutes()+":"+t.getSeconds()},t.prototype.first=function(t,e,n){var o=document.createElement("div");o.innerHTML='\n                <div class="log" style="border-color: '+n+"; background-color: "+n+';">\n                    <p><span style="color:'+e+';">'+t+"</span></p>\n                </div>\n            ";var r=document.getElementsByClassName("tools-notice-content")[0].getElementsByTagName("div");document.querySelector(".tools-notice-content").insertBefore(o,r[0])},t.prototype.toStr=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n="",o=0;o<t.length;o++)"object"==typeof t[o]?n+=t[o].toString()+"\n":n+=t[o]+"\n";return n.substring(0,n.length-1)},t.prototype.Debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return console.info.apply(console,o(["[debug",this.getNowTime(),"]"],t)),this},t.prototype.Info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=this.toStr.apply(this,t);return this.el?this.first(n,"#409EFF","rgba(121, 187, 255, 0.2)"):console.info.apply(console,o(["[info",this.getNowTime(),"]"],t)),this},t.prototype.Warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=this.toStr.apply(this,t);return this.el&&this.first(n,"#5C3C00","rgba(250, 236, 216, 0.4)"),console.warn.apply(console,o(["[warn",this.getNowTime(),"]"],t)),document.hidden&&"true"==localStorage.is_notify&&i.Noifications({title:"网课小工具",text:n+"\n3秒后自动关闭",timeout:3e3}),this},t.prototype.Error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=this.toStr.apply(this,t);return this.el&&this.first(n,"#FFF0F0","rgba(253, 226, 226, 0.5)"),console.error.apply(console,o(["[error",this.getNowTime(),"]"],t)),"true"==localStorage.is_notify&&i.Noifications({title:"网课小工具",text:n}),this},t.prototype.Fatal=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=this.toStr.apply(this,t);return this.el&&this.first(n,"#ff0000","rgba(253, 226, 226, 0.5)"),console.error.apply(console,o(["[fatal",this.getNowTime(),"]"],t)),i.Noifications({title:"网课小工具",text:n}),this},t}();e.PageLog=a;var u=function(){function t(){}return t.prototype.Debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this},t.prototype.Info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this},t.prototype.Warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this},t.prototype.Error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this},t.prototype.Fatal=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this},t}();e.EmptyLog=u},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Hook=void 0;var o=n(0),r=function(){function t(t,e){this.context=e||window,this.func=t}return t.prototype.Middleware=function(t){var e;e="string"==typeof this.func?this.func:this.func.name;var n=this.context[e];this.context[e]=function(){for(var e=[n],o=0;o<arguments.length;o++)e[o+1]=arguments[o];return t.apply(this,e)}},t.HookAjaxRespond=function(e,n){var r=this;if(!this.once){this.match_list=new Map;var i=this;new t("open",o.Application.GlobalContext.XMLHttpRequest.prototype).Middleware((function(t){for(var e=this,n=[],o=1;o<arguments.length;o++)n[o-1]=arguments[o];return i.match_list.forEach((function(t,o){-1!=n[1].indexOf(o)&&Object.defineProperty(e,"responseText",{configurable:!0,get:function(){return t.call(this,n[1],this.response)}})})),t.apply(this,n)})),this.once=!0}"string"==typeof e?this.match_list.set(e,n):e.forEach((function(t){r.match_list.set(t,n)}))},t}();e.Hook=r},function(t,e,n){"use strict";var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__spreadArrays||function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var o=Array(t),r=0;for(e=0;e<n;e++)for(var i=arguments[e],c=0,a=i.length;c<a;c++,r++)o[r]=i[c];return o};Object.defineProperty(e,"__esModule",{value:!0}),e.CxTaskControlBar=e.CxTask=void 0;var c=n(4),a=n(1),u=n(0),s=function(t){function e(e,n){var o=t.call(this)||this;return o.taskinfo=n,o.context=e,o.taskinfo.job?o.done=!1:o.done=!0,o}return r(e,t),e.prototype.callEvent=function(e){for(var n=[],o=1;o<arguments.length;o++)n[o-1]=arguments[o];"complete"==e&&(this.done=!0),t.prototype.callEvent.apply(this,i([e],n))},e.prototype.Init=function(){return new Promise((function(t){t()}))},e.prototype.Submit=function(){return new Promise((function(t){t()}))},e.prototype.Stop=function(){return new Promise((function(t){t()}))},e.prototype.Done=function(){return this.done},e}(n(14).Task);e.CxTask=s;var l=function(){function t(t,e){this.task=e,this.prev=document.createElement("div"),t.style.textAlign="center",t.style.width="100%",t.prepend(this.prev),this.defaultBtn()}return t.prototype.defaultBtn=function(){var t=this,e=c.CssBtn(a.createBtn(u.Application.App.config.auto?"暂停挂机":"开始挂机","点击开始自动挂机","cx-btn"));e.onclick=function(){"暂停挂机"==e.innerText?(u.Application.App.config.auto=!1,e.innerText="开始挂机",e.title="点击开始自动挂机",u.Application.App.log.Info("挂机停止了")):(u.Application.App.config.auto=!0,e.innerText="暂停挂机",e.title="停止挂机,开始好好学习",u.Application.App.log.Info("挂机开始了"),t.task.Start())},this.prev.append(e)},t.prototype.append=function(t){this.prev.append(t)},t.prototype.download=function(){var t=this;if(this.task.taskinfo.property.objectid){var e=c.CssBtn(a.createBtn("下载资源","我要下载下来好好学习","cx-btn"));return e.style.background="#999999",e.onclick=function(){a.get("https://mooc1-1.chaoxing.com/ananas/status/"+t.task.taskinfo.property.objectid,(function(t){var e=JSON.parse(t);prompt("如果打开下载失败，请复制下面链接手动下载",e.download),window.open(e.download)})).error((function(){alert("资源信息获取失败")}))},e}},t}();e.CxTaskControlBar=l},function(t,e,n){"use strict";var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.Video=e.CxVideoControlBar=e.CxVideoOptimization=void 0;var i=n(9),c=n(0),a=n(1),u=n(4),s=n(10),l=function(){function t(){}return t.prototype.Init=function(){var t=this;window.addEventListener("load",(function(){c.Application.App.config.super_mode&&a.isPhone()&&(c.Application.GlobalContext.Ext.isChaoxing=!0)})),this.hook(),document.addEventListener("readystatechange",(function(){t.hook()})),this.Api()},t.prototype.hook=function(){if("interactive"==document.readyState){c.Application.App.log.Debug("hook cx video");var t=new i.Hook("decode",c.Application.GlobalContext.Ext),e=this;t.Middleware((function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var o=t.apply(this,e);return c.Application.App.config.super_mode&&1==o.danmaku&&(o.danmaku=0),o})),window.frameElement.setAttribute("fastforward",""),window.frameElement.setAttribute("switchwindow",""),new i.Hook("params2VideoOpt",c.Application.GlobalContext.ans.VideoJs.prototype).Middleware((function(t){for(var n=[],o=1;o<arguments.length;o++)n[o-1]=arguments[o];e.param=n[0];var r=t.apply(this,n);r.plugins.timelineObjects.url=e.param.rootPath+"/richvideo/initdatawithviewer";for(var i=c.Application.App.config.video_cdn||localStorage.cdn||"公网1",a=0;a<r.playlines.length;a++)if(r.playlines[a].label==i){var u=r.playlines[a];r.playlines.splice(a,1),r.playlines.splice(0,0,u)}return localStorage.cdn=r.playlines[0].label,delete r.plugins.studyControl,r})),c.Application.GlobalContext.Ext.isSogou=!1,new i.Hook("afterRender",c.Application.GlobalContext.ans.videojs.ErrorDisplay.prototype).Middleware((function(t){for(var e=this,n=[],o=1;o<arguments.length;o++)n[o-1]=arguments[o];var r=t.apply(this,n);return setTimeout((function(){for(var t=e.renderData.selectedIndex,n=e.renderData.playlines,o=c.Application.App.config.video_cdn||localStorage.cdn||"公网1",r=0;r<n.length;r++)if(r!=t){if(""==o)return localStorage.cdn=n[r].label,e.onSelected(r);if(o==n[r].label)return localStorage.cdn=n[r].label,e.onSelected(r)}var i=(t+1)%n.length;return localStorage.cdn=n[i].label,e.onSelected(i)}),2e3),r}))}},t.prototype.Api=function(){var t=this;c.Application.GlobalContext.sendTimePack=function(e,n){NaN!=e&&null!=e||(e=parseInt(t.param.duration));var o=Math.round(e||t.param.duration-a.randNumber(1,2)),r="["+t.param.clazzId+"]["+t.param.userid+"]["+t.param.jobid+"]["+t.param.objectId+"]["+(1e3*o).toString()+"][d_yHJ!$pdA~5]["+(1e3*t.param.duration).toString()+"][0_"+t.param.duration+"]";r=c.Application.GlobalContext.md5(r),a.get(t.param.reportUrl+"/"+t.param.dtoken+"?clipTime=0_"+t.param.duration+"&otherInfo="+t.param.otherInfo+"&userid="+t.param.userid+"&rt=0.9&jobid="+t.param.jobid+"&duration="+t.param.duration+"&dtype=Video&objectId="+t.param.objectId+"&clazzId="+t.param.clazzId+"&view=pc&playingTime="+o+"&isdrag=4&enc="+r,(function(t){var e=JSON.parse(t);n(e.isPassed)}))}},t}();e.CxVideoOptimization=l;var p=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.defaultBtn=function(){var e=this;t.prototype.defaultBtn.call(this);var n=u.CssBtn(a.createBtn("秒过视频","秒过视频会被后台检测到","cx-btn")),o=u.CssBtn(a.createBtn("下载字幕","我要下载字幕一同食用"));n.style.background="#F57C00",o.style.background="#638EE1",this.prev.append(n,this.download(),o),n.onclick=function(){a.protocolPrompt("秒过视频会产生不良记录,是否继续?","boom_no_prompt")&&e.task.sendEndTimePack((function(t){t?alert("秒过成功,刷新后查看效果"):alert("操作失败,错误")}))},o.onclick=function(){e.task.downloadSubtitle()}},e}(s.CxTaskControlBar);e.CxVideoControlBar=p;var f=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.queryVideo=function(){return this.context.document.getElementById("video_html5_api")},e.prototype.Init=function(){var t=this;return new Promise((function(e){c.Application.App.log.Debug("播放器配置",t.taskinfo);var n=t.context.setInterval((function(){try{var o=t.queryVideo();if(null==o)return void(t.context.document.querySelector("#reader").innerHTML.indexOf("您没有安装flashplayer")>=0&&(t.context.clearInterval(n),t.flash=!0,e()));t.context.clearInterval(n),t.video=o,t.initPlayer(),t.video.addEventListener("ended",(function(){t.end=!0,t.context.clearInterval(t.time),t.callEvent("complete")})),e()}catch(t){}}),500)}))},e.prototype.Type=function(){return"video"},e.prototype.Start=function(){var t=this;return new Promise((function(e){if(t.flash)return e(),t.callEvent("complete");t.time=t.context.setInterval((function(){c.Application.App.config.auto&&t.video.paused&&t.video.play()}),5e3),t.video.addEventListener("pause",(function(){t.video.currentTime<=t.video.duration-5&&(t.end||t.video.play())})),t.video.play(),e()}))},e.prototype.initPlayer=function(){this.playbackRate=this._playbackRate,this.muted=this._muted},e.prototype.sendEndTimePack=function(t){this.sendTimePack(this.video.duration,t)},e.prototype.sendTimePack=function(t,e){this.context.sendTimePack(t,(function(t){e(t)}))},e.prototype.downloadSubtitle=function(){a.get("/richvideo/subtitle?mid="+this.taskinfo.property.mid+"&_dc="+Date.parse((new Date).toString()),(function(t){var e=JSON.parse(t);if(e.length<=0)alert("没有字幕！");else for(var n=0;n<e.length;n++){var o=e[n].url;window.open(o)}}))},Object.defineProperty(e.prototype,"playbackRate",{set:function(t){this._playbackRate=t,this.video&&(this.video.playbackRate=t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"muted",{set:function(t){this._muted=t,this.video&&(this.video.muted=t)},enumerable:!1,configurable:!0}),e}(s.CxTask);e.Video=f},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Topic=void 0;var o=n(0),r=n(2),i=function(){function t(t,e){this.answer=e,this.context=t}return t.prototype.SetQueryQuestions=function(t){this.queryQuestions=t},t.prototype.addQuestion=function(){var t=this,e=this.queryQuestions.QueryQuestions();this.answer.ClearQuestion(),e.forEach((function(e){t.answer.AddQuestion(e)}))},t.prototype.QueryAnswer=function(){var t=this;return new Promise((function(e){if(t.lock)return e("processing");t.lock=!0,o.Application.App.log.Info("题目搜索中..."),t.addQuestion(),t.answer.Answer((function(n){return t.lock=!1,e(n),"network"==n?o.Application.App.log.Error("题库无法访问,请查看:"+r.SystemConfig.url):"incomplete"==n?o.Application.App.log.Warn("题库答案不全,请手动填写操作"):void 0}))}))},t.prototype.CollectAnswer=function(){var t=this;return new Promise((function(e){o.Application.App.log.Debug("收集题目答案",t.context),t.addQuestion(),t.answer.Push((function(t){o.Application.App.log.Debug("采集答案返回",t),e()}))}))},t}();e.Topic=i},,function(t,e,n){"use strict";var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.Task=void 0;var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.Init=function(){return new Promise((function(t){return t()}))},e.prototype.Submit=function(){return new Promise((function(t){return t()}))},e.prototype.Stop=function(){return new Promise((function(t){return t()}))},e.prototype.Context=function(){return window},e}(n(15).EventListener);e.Task=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.EventListener=void 0;var o=function(){function t(){this.event={}}return t.prototype.addEventListener=function(t,e){this.event[t]||(this.event[t]=new Array),this.event[t].push({callback:e,param:{once:!1}})},t.prototype.addEventListenerOnce=function(t,e){this.event[t]||(this.event[t]=new Array),this.event[t].push({callback:e,param:{once:!0}})},t.prototype.callEvent=function(t){for(var e=this,n=[],o=1;o<arguments.length;o++)n[o-1]=arguments[o];if(this.event[t]){var r=new Array;this.event[t].forEach((function(t,o){t.callback.apply(e,n),t.param.once&&r.push(o)})),r.forEach((function(n,o){e.event[t].splice(n-o,1)}))}},t}();e.EventListener=o},function(t,e,n){"use strict";var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.CxQuestionFactory=void 0;var i=n(1),c=n(7),a=n(4),u=function(){function t(){}return t.CreateCourseQuestion=function(t,e){var n=c.SwitchTopicType(i.substrex(e.innerText,"【","】"));return this.CreateCourseQuestionByTopicType(t,n,e)},t.CreateExamQuestion=function(t,e,n){var o=new l,r=null;switch(this.RemoveNotice(n),e){case 1:case 2:r=new y(t,n,e,o);break;case 3:r=new m(t,n,e,o);break;case 4:r=new v(t,n,e,o);break;default:return this.AddNotice(n,"不支持的类型"),null}return r},t.CreateCourseQuestionByTopicType=function(t,e,n){var o=null,r=new s;switch(this.RemoveNotice(n),e){case 1:case 2:o=new f(t,n,e,r);break;case 3:o=new d(t,n,e,r);break;case 4:o=new h(t,n,e,r);break;default:return this.AddNotice(n,"不支持的类型"),null}return o},t.getBeforeType=function(t){var e=t.previousElementSibling;do{if("Cy_TItle1"==e.className)return e;e=e.previousElementSibling}while(null!=e);return null},t.CreateHomeWorkQuestion=function(e,n){var o=t.getBeforeType(n);return this.CreateCourseQuestionByTopicType(e,c.SwitchTopicType(i.substrex(o.innerText,".","（")),n)},t.CreateExamCollectQuestion=function(e,n){var o=t.getBeforeType(n.parentElement).innerText.match(/、(.*?)[\s|（]/)[1];return this.CreateExamQuestionByTopicType(e,c.SwitchTopicType(o),n)},t.CreateExamQuestionByTopicType=function(t,e,n){var o=null,r=new s;switch(this.RemoveNotice(n),e){case 1:case 2:o=new f(t,n,e,r);break;case 3:o=new d(t,n,e,r);break;case 4:o=new v(t,n,e,r);break;default:return this.AddNotice(n,"不支持的类型"),null}return o},t.RemoveNotice=function(t){var e=t.querySelector(".clearfix > ul,.clearfix > .Py_tk,.Zy_ulTk");null==e&&(e=t),e.querySelectorAll(".prompt-line-answer").forEach((function(t){t.remove()}))},t.AddNotice=function(t,e){var n=t.querySelector(".clearfix > ul,.clearfix > .Py_tk,.Zy_ulTk");null==n&&(n=t),a.CreateNoteLine(e,"answer",n)},t}();e.CxQuestionFactory=u;var s=function(){function t(){}return t.prototype.GetTopic=function(t){var e=t.querySelector(".Zy_TItle > .clearfix,.Cy_TItle > .clearfix").innerHTML;return e=e.substring(e.indexOf("】")+1),/（(.+?)分）($|\s)/.test(e)&&(e=e.substring(0,e.lastIndexOf("（"))),e},t}(),l=function(){function t(){}return t.prototype.GetTopic=function(t){var e=t.querySelector(".Cy_TItle.clearfix .clearfix").innerHTML;return e=(e=e.substr(0,e.lastIndexOf("分）"))).substr(0,e.lastIndexOf("（"))},t}(),p=function(){function t(t,e,n,o){this.context=t,this.el=e,this.type=n,this.processor=o}return t.prototype.SetStatus=function(t){this.AddNotice(c.TopicStatusString(t))},t.prototype.GetTopic=function(){return this.processor.GetTopic(this.el)},t.prototype.RemoveNotice=function(){u.RemoveNotice(this.el)},t.prototype.AddNotice=function(t){u.AddNotice(this.el,t)},t.prototype.GetType=function(){return this.type},t.prototype.options=function(){return this.el.querySelector(".clearfix > ul,.clearfix ul.Zy_ulBottom.clearfix,ul.Zy_ulTk").querySelectorAll("li")},t.prototype.isCorrect=function(){var t=this.el.querySelector(".Py_answer.clearfix,.Py_tk");if(t){if(t.querySelectorAll(".fr.dui").length>0||t.querySelectorAll(".fr.bandui").length>0)return t;if(t.innerHTML.indexOf("正确答案")>=0)return t}var e=this.el.querySelector(".Cy_TItle.clearfix");if(!e)return null;var n=e.querySelector(".font18.fb");return n&&"0.0"!=n.innerHTML?t:null},t.prototype.defaultAnswer=function(){var t=new c.PushAnswer;return t.topic=this.GetTopic(),t.type=this.GetType(),t.correct=new Array,t.answers=new Array,t},t}(),f=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.getContent=function(t){var e=t.querySelector("a");return null==e?"true"==t.querySelector("label > input,input").value?"对√":"错×":e.innerHTML},e.prototype.getOption=function(t){return t.querySelector("input").value},e.prototype.click=function(t,e){var n=t.querySelector("label > input");n.checked||n.click(),this.AddNotice(this.getOption(t)+":"+e)},e.prototype.Random=function(){var t=this.options(),e=i.randNumber(0,t.length-1);return this.click(t[e],this.getContent(t[e])),"random"},e.prototype.Fill=function(t){var e=this;return new Promise((function(n){for(var o=e.options(),r=!1,i=0;i<t.correct.length;i++)for(var c=0;c<o.length;c++)""==t.correct[i].content.trim()?e.getOption(o[c])==t.correct[i].option&&(e.click(o[c],e.getContent(o[c])),r=!0):t.Equal(e.getContent(o[c]),t.correct[i].content)&&(e.click(o[c],t.correct[i].content),r=!0);return n(r?"ok":"no_match")}))},e.prototype.Correct=function(){var t=this.isCorrect();if(null==t)return null;for(var e=this.defaultAnswer(),n=this.el.querySelectorAll(".Zy_ulTop > li.clearfix,.Cy_ulTop li"),o=t.querySelector("span").innerText,r=0;r<n.length;r++){var i={option:n[r].querySelector("i.fl").innerText.substring(0,1),content:n[r].querySelector("a.fl,a").innerHTML};e.answers.push(i),o.indexOf(i.option)>0&&e.correct.push(i)}return e},e}(p),d=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.getContent=function(t){return"true"==t.querySelector("label > input,input").value?"对√":"错×"},e.prototype.click=function(t){var e=t.querySelector("label > input,input");e.checked||e.click(),this.AddNotice(this.getContent(t))},e.prototype.Random=function(){var t=this.options(),e=i.randNumber(0,1);return this.click(t[e]),"random"},e.prototype.Fill=function(t){var e=this;return new Promise((function(n){var o=e.options();return e.click(o[t.correct[0].content?0:1]),n("ok")}))},e.prototype.Correct=function(){var t=this.el.querySelector(".Py_answer.clearfix"),e=this.defaultAnswer();if(t.querySelectorAll(".fr.dui").length<=0&&t.querySelectorAll(".fr.cuo").length<=0)return null;var n=t.querySelector("span").innerText;return t.querySelectorAll(".fr.dui").length?n.indexOf("×")>=0?e.correct.push({option:!1,content:!1}):e.correct.push({option:!0,content:!0}):n.indexOf("×")>=0?e.correct.push({option:!0,content:!0}):e.correct.push({option:!1,content:!1}),e},e}(f),h=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.getOption=function(t){if("XztiHover1"==t.className)return i.substrex(t.previousElementSibling.innerHTML,"第","空");var e=t.querySelector("span.fb");return i.substrex(e.innerHTML,"第","空")},e.prototype.Random=function(){return"no_support_random"},e.prototype.Correct=function(){if(null==this.isCorrect())return null;var t=this.defaultAnswer(),e=this.el.querySelectorAll(".Py_tk span.font14"),n=!1;e.length<=0&&(n=!0,e=this.el.querySelectorAll(".Py_answer.clearfix .font14"));for(var o=0;o<e.length;o++)if(!(n&&e[o].querySelectorAll(".fr.dui").length<=0)){var r=e[o].querySelector("i.fl"),c={option:i.substrex(r.innerHTML,"第","空"),content:e[o].querySelector(".clearfix").innerText};t.correct.push(c)}return t},e.prototype.Fill=function(t){var e=this;return new Promise((function(n){var o=e.options();o.length||(o=e.el.querySelector(".Zy_ulTk").querySelectorAll(".XztiHover1"));for(var r=0,c=0;c<t.correct.length;c++)for(var a=0;a<o.length;a++)if(e.getOption(o[a])==t.correct[c].option){r++;var u=o[a].querySelector("input.inp");if(u)u.value=i.removeHTMLTag(t.correct[c].content),e.AddNotice(e.getOption(o[a])+":"+t.correct[c].content);else{var s=e.context.$(o[a]).find("textarea");if(s.length<=0){e.AddNotice(e.getOption(o[a])+"空发生了一个错误");continue}e.context.UE.getEditor(s.attr("name")).setContent(t.correct[c].content),e.AddNotice(e.getOption(o[a])+":"+t.correct[c].content)}}return r==o.length?n("ok"):n("no_match")}))},e}(p),y=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.options=function(){return this.el.querySelectorAll(".Cy_ulBottom.clearfix.w-buttom li input")},e.prototype.getContent=function(t){var e=this.el.querySelectorAll(".Cy_ulTop.w-top li div.clearfix a"),n=t.parentElement.parentElement,o=-1;do{n=n.previousElementSibling,o++}while(null!=n);return e[o].innerHTML},e.prototype.getOption=function(t){return t.parentElement.innerText},e.prototype.click=function(t,e){t.click(),this.AddNotice(this.getOption(t)+":"+e)},e}(f),v=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.options=function(){return this.el.querySelectorAll(".Cy_ulTk .XztiHover1")},e.prototype.getOption=function(t){var e=t.querySelector(".fb.font14");return i.substrex(e.innerHTML,"第","空")},e.prototype.Fill=function(t){var e=this;return new Promise((function(n){for(var o=e.options(),r=0,i=0;i<t.correct.length;i++)for(var c=0;c<o.length;c++)if(e.getOption(o[c])==t.correct[i].option){r++;var a=window.$(o[c]).find("textarea");if(a.length<=0){e.AddNotice(e.getOption(o[c])+"空发生了一个错误");continue}window.UE.getEditor(a.attr("name")).setContent(t.correct[i].content),e.AddNotice(e.getOption(o[c])+":"+t.correct[i].content)}return r==o.length?n("ok"):n("no_match")}))},e.prototype.Correct=function(){if(null==this.isCorrect())return null;var t=this.defaultAnswer(),e=this.el.querySelectorAll(".Py_tk div[id] span.font14"),n=!1;e.length<=0&&(n=!0,e=this.el.querySelectorAll(".Py_answer.clearfix .font14"));for(var o=0;o<e.length;o++)if(!(n&&e[o].querySelectorAll(".fr.dui").length<=0)){var r=e[o].querySelector("i"),c={option:i.substrex(r.innerHTML,"第","空"),content:e[o].innerHTML.substr(e[o].innerHTML.indexOf("</i>")+4)};t.correct.push(c)}return t},e}(h),m=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.options=function(){return this.el.querySelectorAll(".Cy_ulBottom.clearfix li")},e}(d)},function(t,e,n){"use strict";var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.CxAudioControlBar=e.CxAudioTask=e.CxAudioOptimization=e.CxDocumentTask=void 0;var i=n(10),c=n(1),a=n(0),u=n(11),s=n(4),l=n(9),p=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.Start=function(){var t=this;return new Promise((function(e){var n=function(){var o=t.context.document.querySelector(".imglook > .mkeRbtn");"hidden"!=o.style.visibility?(o.click(),t.time=t.context.setTimeout(n,1e3*c.randNumber(1,5)),e()):t.callEvent("complete")};t.time=t.context.setTimeout(n,1e3*c.randNumber(1,5))}))},e.prototype.Type=function(){return"document"},e}(i.CxTask);e.CxDocumentTask=p;var f=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.Init=function(){var t=this;window.addEventListener("load",(function(){a.Application.App.config.super_mode&&c.isPhone()&&(a.Application.GlobalContext.Ext.isChaoxing=!0)})),this.hook(),document.addEventListener("readystatechange",(function(){t.hook()})),this.Api()},e.prototype.hook=function(){if("interactive"==document.readyState){a.Application.App.log.Debug("hook cx audio");var t=this;new l.Hook("params2VideoOpt",a.Application.GlobalContext.ans.AudioJs.prototype).Middleware((function(e){for(var n=[],o=1;o<arguments.length;o++)n[o-1]=arguments[o];return t.param=n[0],e.apply(this,n)})),a.Application.GlobalContext.Ext.isSogou=!1}},e}(u.CxVideoOptimization);e.CxAudioOptimization=f;var d=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.queryVideo=function(){return this.context.document.getElementById("audio_html5_api")},e}(u.Video);e.CxAudioTask=d;var h=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.defaultBtn=function(){var e=this;t.prototype.defaultBtn.call(this);var n=s.CssBtn(c.createBtn("秒过嘤频","秒过会被后台检测到","cx-btn"));n.style.background="#F57C00",n.onclick=function(){c.protocolPrompt("秒过会产生不良记录,是否继续?","boom_audio_no_prompt")&&e.task.sendEndTimePack((function(t){t?alert("秒过成功,刷新后查看效果"):alert("操作失败,错误")}))},this.prev.append(n,this.download())},e}(i.CxTaskControlBar);e.CxAudioControlBar=h},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o,r=n(1),i=n(0),c=n(6),a=n(8),u=n(19),s=n(20);o=top==self?new a.PageLog:new a.ConsoleLog;var l=(new Map).set("config",new c.ChromeConfigItems(c.NewFrontendGetConfig())).set("logger",o);i.Application.GlobalContext=window,new i.Application(i.Frontend,new u.mooc(new s.DefaultMoocFactory),l).run(),r.RemoveInjected(document)},function(t,e,n){"use strict";var o=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))((function(r,i){function c(t){try{u(o.next(t))}catch(t){i(t)}}function a(t){try{u(o.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(c,a)}u((o=o.apply(t,e||[])).next())}))},r=this&&this.__generator||function(t,e){var n,o,r,i,c={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;c;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return c.label++,{value:i[1],done:!1};case 5:c.label++,o=i[1],i=[0];continue;case 7:i=c.ops.pop(),c.trys.pop();continue;default:if(!(r=c.trys,(r=r.length>0&&r[r.length-1])||6!==i[0]&&2!==i[0])){c=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){c.label=i[1];break}if(6===i[0]&&c.label<r[1]){c.label=r[1],r=i;break}if(r&&c.label<r[2]){c.label=r[2],c.ops.push(i);break}r[2]&&c.ops.pop(),c.trys.pop();continue}i=e.call(t,c)}catch(t){i=[6,t],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}};Object.defineProperty(e,"__esModule",{value:!0}),e.mooc=void 0;var i=n(0),c=function(){function t(t){this.once=!1,this.moocFactory=t}return t.prototype.start=function(){return o(this,void 0,void 0,(function(){var t,e,n,o;return r(this,(function(r){switch(r.label){case 0:return r.trys.push([0,3,,4]),t=document.readyState,i.Application.App.log.Debug("Start document state:",t),null==(e=this.moocFactory.CreateMooc())?[3,2]:[4,e.Init()];case 1:r.sent(),null!=e.Next&&this.runMoocTask(e),r.label=2;case 2:return[3,4];case 3:return n=r.sent(),i.Application.App.log.Fatal("扩展发生了一个致命错误:",n),[3,4];case 4:return top==self&&(o=!1,document.addEventListener("visibilitychange",(function(){if(document.hidden){if(o)return;i.Application.App.log.Warn("请注意!最小化可能导致视频无法正常播放!允许切换窗口."),o=!0}}))),[2]}}))}))},t.prototype.runMoocTask=function(t){var e=this;t.addEventListener("reload",(function(){i.Application.App.config.auto&&e.runTask(t),clearTimeout(e.timer)})),t.addEventListener("complete",(function(){i.Application.App.log.Warn("任务完成了"),alert("任务完成了")})),t.addEventListener("taskComplete",(function(n,c){if(t.SetTaskPointer(n+1),i.Application.App.config.auto){var a=i.Application.App.config.interval;i.Application.App.log.Info(a+"分钟后自动切换下一个任务点"),e.timer=setTimeout((function(){return o(e,void 0,void 0,(function(){return r(this,(function(e){switch(e.label){case 0:return[4,c.Submit()];case 1:return e.sent(),[4,this.runTask(t)];case 2:return e.sent(),[2]}}))}))}),6e4*a)}})),t.addEventListener("error",(function(t){i.Application.App.log.Fatal(t),alert(t)}))},t.prototype.runTask=function(t){return o(this,void 0,void 0,(function(){var e;return r(this,(function(n){switch(n.label){case 0:return this.once?[2]:(this.once=!0,[4,t.Next()]);case 1:e=n.sent(),n.label=2;case 2:return null==e?[3,9]:e.Done()?[4,t.Next()]:[3,4];case 3:return e=n.sent(),[3,2];case 4:return i.Application.App.config.answer_ignore&&"topic"==e.Type()?[4,t.Next()]:[3,6];case 5:return e=n.sent(),[3,2];case 6:return i.Application.App.config.auto?[4,e.Start()]:[3,8];case 7:n.sent(),n.label=8;case 8:return this.nowTask=e,[3,9];case 9:return this.once=!1,[2]}}))}))},t}();e.mooc=c},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DefaultMoocFactory=void 0;var o=n(21),r=n(28),i=n(35),c=function(){function t(){}return t.prototype.CreateMooc=function(){var t=(new o.CxPlatform).CreateMooc();return null==t&&(t=(new r.ZhsPlatform).CreateMooc()),null==t&&(t=(new i.Course163Platform).CreateMooc()),t},t}();e.DefaultMoocFactory=c},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CxPlatform=void 0;var o=n(22),r=n(23),i=n(26),c=n(11),a=n(27),u=n(17),s=n(0),l=function(){function t(){}return t.prototype.CreateMooc=function(){var t=document.URL,e=null;return t.indexOf("mycourse/studentstudy?")>0?(new o.VCode(new i.CxCourseVCode),e=new r.CxCourse):t.indexOf("ananas/modules/video/index.html")>0?e=new c.CxVideoOptimization:t.indexOf("ananas/modules/audio/index.html")>0?e=new u.CxAudioOptimization:(t.indexOf("work/doHomeWorkNew")>0||t.indexOf("work/selectWorkQuestionYiPiYue")>0)&&self==top?e=new r.CxHomeWork:t.indexOf("exam/test/reVersionTestStartNew")>0||t.indexOf("exam/test/reVersionPaperMarkContentNew")>0?e=new r.CxExamTopic:t.indexOf("/course/")>0?e=new a.ReadStartPage:t.indexOf("ztnodedetailcontroller/visitnodedetail")>0?e=new a.Read:t.indexOf("exam/test?")>0&&(e=new a.Exam),e&&s.Application.App.config.SetNamespace("cx"),e},t}();e.CxPlatform=l},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.VCode=void 0;var o=n(1),r=n(2),i=n(0),c=function(){function t(t){this.listen=t}return t.prototype.Init=function(){var t=this;this.listen.Listen((function(e){i.Application.App.log.Info("准备进行打码"),t.getVcode(e)}))},t.prototype.getVcode=function(t){var e=t.GetImage(),n="";n="string"==typeof e?e:o.getImageBase64(e,"jpeg"),o.HttpUtils.HttpPost(r.SystemConfig.url+"vcode","img="+encodeURIComponent(n.substr("data:image/jpeg;base64,".length)),{headers:{Authorization:i.Application.App.config.vtoken,"X-Version":r.SystemConfig.version.toString()},json:!1,success:function(e){var n=JSON.parse(e);i.Application.App.log.Debug(n),-2==n.code?t.Fill("error",n.msg,""):-1==n.code?t.Fill("error","打码服务器发生错误",""):n.msg?t.Fill("ok","打码成功",n.msg):t.Fill("error","未知错误","")},error:function(){t.Fill("network","网络请求失败","")}})},t}();e.VCode=c},function(t,e,n){"use strict";var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))((function(r,i){function c(t){try{u(o.next(t))}catch(t){i(t)}}function a(t){try{u(o.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(c,a)}u((o=o.apply(t,e||[])).next())}))},c=this&&this.__generator||function(t,e){var n,o,r,i,c={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;c;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return c.label++,{value:i[1],done:!1};case 5:c.label++,o=i[1],i=[0];continue;case 7:i=c.ops.pop(),c.trys.pop();continue;default:if(!(r=c.trys,(r=r.length>0&&r[r.length-1])||6!==i[0]&&2!==i[0])){c=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){c.label=i[1];break}if(6===i[0]&&c.label<r[1]){c.label=r[1],r=i;break}if(r&&c.label<r[2]){c.label=r[2],c.ops.push(i);break}r[2]&&c.ops.pop(),c.trys.pop();continue}i=e.call(t,c)}catch(t){i=[6,t],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}};Object.defineProperty(e,"__esModule",{value:!0}),e.CxHomeWork=e.CxExamTopic=e.CxCourse=void 0;var a=n(0),u=n(24),s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.taskIndex=0,e}return r(e,t),e.prototype.Init=function(){var t=this;return new Promise((function(e){var n=!0;document.addEventListener("load",(function(o){var r=o.srcElement||o.target;"iframe"==r.id&&(a.Application.App.log.Info("超星新窗口加载"),t.OperateCard(r),n&&e(),n=!1)}),!0)}))},e.prototype.Stop=function(){throw new Error("Method not implemented.")},e.prototype.Next=function(){var t=this;return new Promise((function(e){if(t.taskList.length>t.taskIndex)return e(t.taskList[t.taskIndex]),t.taskIndex++;t.addEventListenerOnce("reload",(function(){return i(t,void 0,void 0,(function(){var t;return c(this,(function(n){switch(n.label){case 0:return t=e,[4,this.Next()];case 1:return t.apply(void 0,[n.sent()]),[2]}}))}))})),t.nextPage(null)}))},e.prototype.SetTaskPointer=function(t){this.taskIndex=t},e.prototype.OperateCard=function(t){return i(this,void 0,void 0,(function(){var e,n,o,r,i,a=this;return c(this,(function(s){switch(s.label){case 0:if(null==(e=t.contentWindow).mArg){if(!(n=e.document.body.innerHTML.match(/try{\s+?mArg = (.*?);/)))return[2];e.mArg=JSON.parse(n[1])}this.attachments=e.mArg.attachments,this.taskList=new Array,o=function(t){var n,o;return c(this,(function(i){switch(i.label){case 0:return(n=r.attachments[t]).defaults=e.mArg.defaults,(o=u.TaskFactory.CreateCourseTask(e,n))?(o.jobIndex=t,r.taskList.push(o),o.addEventListener("complete",(function(){a.callEvent("taskComplete",t,o)})),[4,o.Init()]):[2,"continue"];case 1:return i.sent(),[2]}}))},r=this,i=0,s.label=1;case 1:return i<this.attachments.length?[5,o(i)]:[3,4];case 2:s.sent(),s.label=3;case 3:return i++,[3,1];case 4:return this.taskIndex=0,this.callEvent("reload"),[2]}}))}))},e.prototype.afterPage=function(){for(var t=document.querySelectorAll("div.ncells > *:not(.currents) > .orange01"),e=document.querySelector("div.ncells > .currents"),n=0;n<t.length;n++)if(e.getBoundingClientRect().top<t[n].getBoundingClientRect().top)return t[n];return null},e.prototype.nextPage=function(t){var e=this,n=document.querySelector("span.currents ~ span");return null!=n?n.click():null==(n=this.afterPage())?null==document.querySelector("div.ncells > *:not(.currents) > .lock")?this.callEvent("complete"):setTimeout((function(){if(t>5)return e.callEvent("error","被锁卡住了,请手动处理");a.Application.App.log.Info("等待解锁"),e.nextPage(t+1)}),5e3):void n.parentElement.querySelector("a>span").click()},e}(n(15).EventListener);e.CxCourse=s;var l=function(){function t(){}return t.prototype.Init=function(){window.addEventListener("load",(function(){var t=document.querySelector("#paperId"),e="0";t&&(e=t.value);var n=u.TaskFactory.CreateExamTopicTask(window,{refer:document.URL,id:"exam-"+e,info:e});n.Init(),document.URL.indexOf("exam/test/reVersionTestStartNew")>0&&a.Application.App.config.auto&&n.Start()}))},t}();e.CxExamTopic=l;var p=function(){function t(){}return t.prototype.Init=function(){window.onload=function(){var t=document.querySelector("#workLibraryId"),e="";t&&(e=t.value);var n=u.TaskFactory.CreateHomeworkTopicTask(window,{refer:document.URL,id:e,info:e});n.Init(),a.Application.App.config.auto&&document.querySelector("#workLibraryId")&&n.Start()}},t}();e.CxHomeWork=p},function(t,e,n){"use strict";var o=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))((function(r,i){function c(t){try{u(o.next(t))}catch(t){i(t)}}function a(t){try{u(o.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(c,a)}u((o=o.apply(t,e||[])).next())}))},r=this&&this.__generator||function(t,e){var n,o,r,i,c={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;c;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return c.label++,{value:i[1],done:!1};case 5:c.label++,o=i[1],i=[0];continue;case 7:i=c.ops.pop(),c.trys.pop();continue;default:if(!(r=c.trys,(r=r.length>0&&r[r.length-1])||6!==i[0]&&2!==i[0])){c=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){c.label=i[1];break}if(6===i[0]&&c.label<r[1]){c.label=r[1],r=i;break}if(r&&c.label<r[2]){c.label=r[2],c.ops.push(i);break}r[2]&&c.ops.pop(),c.trys.pop();continue}i=e.call(t,c)}catch(t){i=[6,t],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}};Object.defineProperty(e,"__esModule",{value:!0}),e.TaskFactory=void 0;var i=n(11),c=n(25),a=n(7),u=n(16),s=n(0),l=n(10),p=n(4),f=n(1),d=n(17),h=function(){function t(){}return t.CreateCourseTask=function(t,e){if("insertaudio"==e.property.module&&(e.type="audio"),"video"!=e.type&&"workid"!=e.type&&"document"!=e.type&&"audio"!=e.type)return null;var n,o,r=t.document.querySelector("iframe[jobid='"+e.jobid+"']");switch(null==r?(r=t.document.querySelector("iframe[data*='"+e.property.mid+"'],iframe[objectid='"+e.property.objectid+"']"),o=document.createElement("div"),r.parentElement.prepend(o)):o=r.previousElementSibling,e.type){case"video":(n=(h=new i.CxVideoControlBar(o,new i.Video(r.contentWindow,e))).task).muted=s.Application.App.config.video_mute,n.playbackRate=s.Application.App.config.video_multiple;break;case"workid":var p=r.contentWindow.document.querySelector("#frame_content").contentWindow;e.refer=t.document.URL,e.id=e.property.workid,e.info=e.property.workid;var f=new c.CxCourseTopic(p,new a.ToolsQuestionBankFacade("cx",{refer:t.document.URL,id:e.property.workid,info:e.property.workid}));f.SetQueryQuestions(new c.CxCourseQueryQuestion(p,(function(t,e){return u.CxQuestionFactory.CreateCourseQuestion(t,e)})));var h=new c.CxTopicControlBar(o,new c.TopicAdapter(t,e,f));if(s.Application.App.config.answer_ignore)return null;n=h.task;break;case"document":(h=new l.CxTaskControlBar(o,new d.CxDocumentTask(r.contentWindow,e))).append(h.download()),(n=h.task).muted=s.Application.App.config.video_mute,n.playbackRate=s.Application.App.config.video_multiple;break;case"audio":(n=(h=new d.CxAudioControlBar(o,new d.CxAudioTask(r.contentWindow,e))).task).muted=s.Application.App.config.video_mute,n.playbackRate=s.Application.App.config.video_multiple;break;default:return null}return n},t.CreateExamTopicTask=function(t,e){var n=new c.ExamTopic(t,new a.ToolsQuestionBankFacade("cx",e)),o=new c.TopicAdapter(t,e,n);if(document.URL.indexOf("exam/test/reVersionTestStartNew")>0){n.SetQueryQuestions(n);var r=p.CssBtn(f.createBtn("搜索答案","搜索题目答案"));document.querySelector(".Cy_ulBottom.clearfix.w-buttom,.Cy_ulTk,.Cy_ulBottom.clearfix").append(r),r.onclick=function(){r.innerText="答案搜索中...";try{o.Start().then((function(t){t=t||"搜索题目",r.innerText=a.QuestionStatusString(t)}))}catch(t){}return!1}}else n.SetQueryQuestions(new c.CxCourseQueryQuestion(t,(function(t,e){return u.CxQuestionFactory.CreateExamCollectQuestion(t,e)})));return o},t.CreateHomeworkTopicTask=function(t,e){var n=this,i=new a.ToolsQuestionBankFacade("cx",e),s=new c.HomeworkTopic(t,i);s.SetQueryQuestions(new c.CxCourseQueryQuestion(t,(function(t,e){return u.CxQuestionFactory.CreateHomeWorkQuestion(t,e)})));var l=new c.TopicAdapter(t,e,s),d=p.CssBtn(f.createBtn("搜索答案","搜索题目答案"));return document.querySelector("input#workRelationId")&&(document.querySelector(".CyTop").append(d),d.onclick=function(){return o(n,void 0,void 0,(function(){return r(this,(function(t){return d.innerText="答案搜索中...",l.Start().then((function(t){t=t||"搜索题目",d.innerText=a.QuestionStatusString(t)})),[2]}))}))}),l},t}();e.TaskFactory=h},function(t,e,n){"use strict";var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))((function(r,i){function c(t){try{u(o.next(t))}catch(t){i(t)}}function a(t){try{u(o.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(c,a)}u((o=o.apply(t,e||[])).next())}))},c=this&&this.__generator||function(t,e){var n,o,r,i,c={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;c;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return c.label++,{value:i[1],done:!1};case 5:c.label++,o=i[1],i=[0];continue;case 7:i=c.ops.pop(),c.trys.pop();continue;default:if(!(r=c.trys,(r=r.length>0&&r[r.length-1])||6!==i[0]&&2!==i[0])){c=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){c.label=i[1];break}if(6===i[0]&&c.label<r[1]){c.label=r[1],r=i;break}if(r&&c.label<r[2]){c.label=r[2],c.ops.push(i);break}r[2]&&c.ops.pop(),c.trys.pop();continue}i=e.call(t,c)}catch(t){i=[6,t],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}};Object.defineProperty(e,"__esModule",{value:!0}),e.HomeworkTopic=e.ExamTopic=e.CxCourseTopic=e.CxCourseQueryQuestion=e.TopicAdapter=e.CxTopicControlBar=void 0;var a=n(4),u=n(1),s=n(0),l=n(7),p=n(16),f=n(12),d=n(10),h=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.defaultBtn=function(){var e=this;t.prototype.defaultBtn.call(this);var n=a.CssBtn(u.createBtn("搜索题目","点击搜索题目答案","cx-btn"));n.style.background="#3fae93",this.prev.append(n),n.onclick=function(){return i(e,void 0,void 0,(function(){return c(this,(function(t){return n.innerText="答案搜索中...",this.task.Start().then((function(t){t=t||"搜索题目",n.innerText=l.QuestionStatusString(t)})),[2]}))}))}},e}(d.CxTaskControlBar);e.CxTopicControlBar=h;var y=function(t){function e(e,n,o){var r=t.call(this,e,n)||this;return r.topic=o,r}return r(e,t),e.prototype.Init=function(){var t=this;return new Promise((function(e){return i(t,void 0,void 0,(function(){return c(this,(function(t){switch(t.label){case 0:return s.Application.App.log.Debug("题目信息",this.taskinfo),[4,this.topic.Init()];case 1:return t.sent(),e(),[2]}}))}))}))},e.prototype.Start=function(){var t=this;return new Promise((function(e){return i(t,void 0,void 0,(function(){var t;return c(this,(function(n){switch(n.label){case 0:return this.lock?[2,e("processing")]:(this.lock=!0,[4,this.topic.QueryAnswer()]);case 1:return t=n.sent(),this.status=t,this.callEvent("complete"),this.lock=!1,[2,e(t)]}}))}))}))},e.prototype.Type=function(){return"topic"},e.prototype.Submit=function(){return i(this,void 0,void 0,(function(){var t=this;return c(this,(function(e){return[2,new Promise((function(e){"success"==t.status?t.topic.Submit().then((function(){e()})):e()}))]}))}))},e}(d.CxTask);e.TopicAdapter=y;var v=function(){function t(t,e){this.context=t,this.createQuestion=e}return t.prototype.QueryQuestions=function(){var t=this,e=this.context.document.querySelectorAll(".TiMu"),n=new Array;return e.forEach((function(e){var o=t.createQuestion(t.context,e);null!=o&&n.push(o)})),n},t}();e.CxCourseQueryQuestion=v;var m=function(t){function e(e,n){var o=t.call(this,e,n)||this;return n.CheckCourse(),o}return r(e,t),e.prototype.Init=function(){var t=this;return new Promise((function(e){var n=t.context.setInterval((function(){return i(t,void 0,void 0,(function(){return c(this,(function(t){switch(t.label){case 0:return"complete"!=this.context.document.readyState?[3,3]:(this.context.clearInterval(n),this.context.document.URL.indexOf("selectWorkQuestionYiPiYue")>0?[4,this.CollectAnswer()]:[3,2]);case 1:t.sent(),t.label=2;case 2:e(),t.label=3;case 3:return[2]}}))}))}),500)}))},e.prototype.QueryAnswer=function(){return this.context.document.URL.indexOf("selectWorkQuestionYiPiYue")>0?null:t.prototype.QueryAnswer.call(this)},e.prototype.Submit=function(){var t=this;return new Promise((function(e){s.Application.App.log.Info("准备提交答案");var n=t;t.context.setTimeout((function(){t.context.document.querySelector(".Btn_blue_1").click(),t.context.setTimeout((function(){var o=t.context.document.querySelector("#tipContent").innerHTML;if(o.indexOf("未做完")>0)return alert("提示:"+o),e("未做完"),void s.Application.App.log.Fatal("有题目未完成,请手动操作.提示:"+o);var r=t.context.setInterval((function(){"none"==(o=document.getElementById("validate")).style.display&&(t.context.clearInterval(r),t.context.parent.document.querySelector("#frame_content").addEventListener("load",(function(){return i(this,void 0,void 0,(function(){return c(this,(function(t){switch(t.label){case 0:return this.contentWindow.document.URL.indexOf("selectWorkQuestionYiPiYue")>0?[4,n.CollectAnswer()]:[3,2];case 1:t.sent(),e(),t.label=2;case 2:return[2]}}))}))})),t.context.document.querySelector(".bluebtn").click())}),2e3)}),2e3)}),2e3)}))},e}(f.Topic);e.CxCourseTopic=m;var g=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.QueryQuestions=function(){var t=document.querySelector(".current"),e=l.SwitchTopicType(t.parentElement.previousElementSibling.innerText),n=p.CxQuestionFactory.CreateExamQuestion(window,e,document.querySelector(".leftContent.TiMu")),o=new Array;return null==n||o.push(n),o},e.prototype.Init=function(){return document.URL.indexOf("exam/test/reVersionPaperMarkContentNew")>0&&this.CollectAnswer(),null},e.prototype.Submit=function(){return new Promise((function(t){t()}))},e}(f.Topic);e.ExamTopic=g;var w=function(t){function e(e,n){return t.call(this,e,n)||this}return r(e,t),e.prototype.Init=function(){var t=this;return new Promise((function(e){document.querySelector("input#workRelationId")||t.CollectAnswer(),e()}))},e.prototype.Submit=function(){return new Promise((function(t){t()}))},e}(m);e.HomeworkTopic=w},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CxCourseVCode=void 0;var o=n(4),r=function(){function t(){}return t.prototype.Listen=function(t){var e;window.addEventListener("load",(function(){(e=document.getElementById("imgVerCode"))&&e.addEventListener("load",(function(){if(!(e.getAttribute("src").indexOf("?")<0)){var n=document.querySelector("#sub").parentElement.parentElement,r=n.querySelector(".prompt-line-dama");r&&r.remove();var c=o.CreateNoteLine("cxmooc自动打码中...","dama",n);t(new i(e,c))}}))}))},t}();e.CxCourseVCode=r;var i=function(){function t(t,e){this.img=t,this.notice=e}return t.prototype.GetImage=function(){return this.img},t.prototype.Fill=function(t,e,n){switch(t){case"ok":this.notice.innerText="cxmooc打码成功,准备提交",document.querySelector("input#code").value=n,setTimeout((function(){document.querySelector("a#sub").click()}),3e3);break;default:alert(e),this.notice.innerText=e}},t}()},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Exam=e.ReadStartPage=e.Read=void 0;var o=n(0),r=n(1),i=n(7),c=function(){function t(){}return t.prototype.Init=function(){var t,e=function(){if(window.getScrollHeight()-window.getHeight()<=window.getScrollTop()+40){for(var n=document.querySelectorAll(".mb15.course_section > a.wh.wh"),i=!1,c=0;c<n.length;c++){if(i)return void n[c].click();document.URL==n[c].href&&(i=!0)}return o.Application.App.log.Warn("阅读完成啦~"),void clearTimeout(t)}window.scrollTo(0,window.getScrollTop()+r.randNumber(60,80)),t=setTimeout(e,500*r.randNumber(10,20))};window.addEventListener("load",(function(){e()}))},t}();e.Read=c;var a=function(){function t(){}return t.prototype.Init=function(){window.addEventListener("load",(function(){if(!o.Application.App.config.auto)return o.Application.App.log.Info("开启自动挂机能够自动阅读文章哦");o.Application.App.log.Info("请在10秒内选择章节,否则扩展将从第一章自动开始"),setTimeout((function(){document.querySelector(".mb15.course_section.fix").querySelector("a").click()}),1e4)}))},t}();e.ReadStartPage=a;var u=function(){function t(){}return t.prototype.Init=function(){var t=new i.ToolsQuestionBank("cx");window.addEventListener("load",(function(){for(var e,n=o.Application.GlobalContext.document.documentElement.innerHTML,r=new RegExp(/goTest\(.*?,(\d+),\d+,.*?,(\d+),false,/g),i=new Array;null!==(e=r.exec(n));){var c={refer:document.URL,id:"exam-"+e[2],info:e[2]};i.push(c)}for(r=new RegExp(/lookUpPaper\('(\d+)','\d+','(\d+)'/g);null!==(e=r.exec(n));){c={refer:document.URL,id:"exam-"+e[2],info:e[2]};i.push(c)}t.CheckCourse(i)}))},t}();e.Exam=u},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ZhsPlatform=void 0;var o=n(29),r=n(34),i=n(0),c=function(){function t(){}return t.prototype.CreateMooc=function(){var t=null;return document.URL.indexOf("studyh5.zhihuishu.com/videoStudy.html")>0?t=new o.ZhsVideo:document.URL.indexOf("zhihuishu.com/stuExamWeb.html")>0&&(t=new r.ZhsExam),t&&i.Application.App.config.SetNamespace("zhs"),t},t}();e.ZhsPlatform=c},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ZhsVideo=void 0;var o=n(9),r=n(0);n(5);var i=n(1),c=n(30),a=n(31),u=function(){function t(){}return t.prototype.Init=function(){var t=this;this.hookAjax();var e=setInterval((function(){try{t.start(),clearInterval(e)}catch(t){}}),500)},t.prototype.createToolsBar=function(){var t=this,e=document.createElement("div");e.className="entrance_div",e.id="cxtools";var n=c.CssBtn(i.createBtn("秒过视频","","zhs-tools-btn"));n.onclick=function(){if(i.protocolPrompt("秒过视频会产生不良记录,是否继续?","boom_no_prompt")){for(var e=document.querySelector(".nPlayTime .duration").innerText,n=0,o=e.match(/[\d]+/gi),r=0;r<3;r++)n+=parseInt(o[r])*Math.pow(60,2-r);var c=n+=i.randNumber(20,200),u=0,l=0,p=0,f=document.querySelector(".current_play .hour").innerText.split(".");if(f.length>=2)switch(u=t.videoList.videoChapterDtos[Number.parseInt(f[0])-1].videoLessons[Number.parseInt(f[1])-1].id,p=t.videoList.videoChapterDtos[Number.parseInt(f[0])-1].videoLessons[Number.parseInt(f[1])-1].chapterId,f.length){case 3:l=t.videoList.videoChapterDtos[Number.parseInt(f[0])-1].videoLessons[Number.parseInt(f[1])-1].videoSmallLessons[Number.parseInt(f[2])-1].id}for(var d=parseInt((n/1.999).toString()),h=0;h<d;h++)t.learningTimeRecord();var y=[t.videoList.recruitId,u,l,t.nowVideoId,p,"0",c,t.studyTotalTime,e],v={watchPoint:t.watchPointPost,ev:s.Z(y),courseId:t.videoList.courseId,learningTokenId:Base64.encode(t.studiedLessonDtoId.toString()),uuid:i.substrex(document.cookie,"uuid%22%3A%22","%22"),dateFormate:Date.parse(new Date)},m=a.stringify(v);i.post("https://studyservice.zhihuishu.com/learning/saveDatabaseIntervalTime",m,!1,(function(t){var e=JSON.parse(t);try{1==e.data.submitSuccess?alert("秒过成功,刷新后查看效果"):alert("秒过失败")}catch(t){alert("秒过失败")}}))}};var o=r.Application.App.config.auto?"暂停挂机":"开始挂机",u=c.CssBtn(i.createBtn(o,"","zhs-tools-btn zhs-start-btn"));u.addEventListener("click",(function(){"暂停挂机"==u.innerText?(u.innerText="开始挂机",r.Application.App.config.auto=!1,localStorage.auto=!1):(u.innerText="暂停挂机",localStorage.auto=!0,r.Application.App.config.auto=!0,t.play())})),e.appendChild(u),e.appendChild(n),document.querySelector(".videotop_box.fl").append(e)},t.prototype.learningTimeRecord=function(){var t=parseInt((this.studyTotalTime/5+2).toString()),e=null==this.watchPointPost||""==this.watchPointPost?"0,1,":this.watchPointPost+",";this.watchPointPost=e+t,this.studyTotalTime+=2},t.prototype.compile=function(){var t=r.Application.App.config.interval;r.Application.App.log.Info(t+"分钟后自动切换下一节"),clearTimeout(this.lastTimer),this.lastTimer=setTimeout((function(){var t=r.Application.GlobalContext.$,e=t(".clearfix.video.current_play").next();0==e.length&&(e=t(".clearfix.video.current_play").parents("ul.list,div").next("div,ul.list").find("li.video")),0!=e.length?r.Application.App.config.auto&&t(e[0]).click():alert("刷课完成")}),6e4*t)},t.prototype.play=function(){this.video&&(this.video.muted=r.Application.App.config.video_mute,this.video.playbackRate=r.Application.App.config.video_multiple,r.Application.App.config.auto&&this.video.play())},t.prototype.start=function(){var t=new o.Hook("createPlayer",r.Application.GlobalContext.PlayerStarter),e=this;t.Middleware((function(t){for(var n=[],o=1;o<arguments.length;o++)n[o-1]=arguments[o];e.createToolsBar(),r.Application.App.log.Info("视频开始加载");var i=n[2].onPause,c=n[2].onReady;e.nowVideoId=n[1].id,n[2].onReady=function(){c.apply(this),e.video=document.querySelector("#vjs_container_html5_api"),r.Application.App.config.auto&&e.play()},n[2].hookPause=function(){i.apply(this),r.Application.App.config.auto&&e.video.play()};var a=setInterval((function(){document.querySelectorAll(".current_play .time_icofinish").length>0&&(clearInterval(a),e.compile())}),2e3);return t.apply(this,n)})),new o.Hook("setInterval",r.Application.GlobalContext).Middleware((function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return r.Application.App.log.Debug("加速器启动"),r.Application.App.config.super_mode&&(e[1]=e[1]/r.Application.App.config.video_multiple),t.apply(this,e)}))},t.prototype.hookAjax=function(){var t=new o.Hook("open",r.Application.GlobalContext.XMLHttpRequest.prototype),e=this;t.Middleware((function(t){for(var n=[],o=1;o<arguments.length;o++)n[o-1]=arguments[o];n[1].indexOf("popupAnswer/loadVideoPointerInfo")>=0?Object.defineProperty(this,"responseText",{get:function(){return this.response.replace(/"questionPoint":\[.*?\],"knowledgeCardDtos"/gm,'"questionPoint":[],"knowledgeCardDtos"')}}):n[1].indexOf("learning/videolist")>=0?Object.defineProperty(this,"responseText",{get:function(){var t=JSON.parse(this.response);return e.videoList=t.data,this.response}}):n[1].indexOf("learning/prelearningNote")>=0&&Object.defineProperty(this,"responseText",{get:function(){var t=JSON.parse(this.response);return e.studiedLessonDtoId=t.data.studiedLessonDto.id,e.studyTotalTime=t.data.studiedLessonDto.studyTotalTime,this.response}});var r=t.apply(this,n);return r}))},t}();e.ZhsVideo=u;var s={_a:"AgrcepndtslzyohCia0uS@",_b:"A0ilndhga@usreztoSCpyc",_c:"d0@yorAtlhzSCeunpcagis",_d:"zzpttjd",X:function(t){for(var e="",n=0;n<t[this._c[8]+this._a[4]+this._c[15]+this._a[1]+this._a[8]+this._b[6]];n++){var o=t[this._a[3]+this._a[14]+this._c[18]+this._a[2]+this._b[18]+this._b[16]+this._c[0]+this._a[4]+this._b[0]+this._b[15]](n)^this._d[this._b[21]+this._b[6]+this._a[17]+this._c[5]+this._b[18]+this._c[4]+this._a[7]+this._a[4]+this._a[0]+this._c[7]](n%this._d[this._a[10]+this._b[13]+this._b[4]+this._a[1]+this._c[7]+this._a[14]]);e+=this.Y(o)}return e},Y:function(t){var e=t[this._c[7]+this._a[13]+this._a[20]+this._b[15]+this._a[2]+this._b[2]+this._c[15]+this._c[19]](16);return(e=e[this._b[3]+this._a[4]+this._b[4]+this._a[1]+this._c[7]+this._c[9]]<2?this._b[1]+e:e)[this._a[9]+this._b[3]+this._c[20]+this._c[17]+this._c[13]](-4)},Z:function(t){for(var e="",n=0;n<t.length;n++)e+=t[n]+";";return e=e.substring(0,e.length-1),this.X(e)}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CssBtn=void 0,e.CssBtn=function(t){return t.style.position="relative",t.style.color="#fff",t.style.padding="0 16px",t.style.display="inline-block",t.style.height="36px",t.style.fontSize="14px",t.style.fontWeight="500",t.style.outline="none",t.style.border="none",t.style.borderRadius="4px",t.style.overflow="hidden",t.style.margin="0 8px",t.addEventListener("mousedown",(function(e){var n=e.offsetX,o=e.offsetY,r=document.createElement("span");r.style.left=n+"px",r.style.top=o+"px",r.className="btn-ripple",t.appendChild(r),setTimeout((function(){r.remove()}),1e3)}),!1),t}},function(t,e,n){"use strict";e.decode=e.parse=n(32),e.encode=e.stringify=n(33)},function(t,e,n){"use strict";function o(t,e){return Object.prototype.hasOwnProperty.call(t,e)}t.exports=function(t,e,n,i){e=e||"&",n=n||"=";var c={};if("string"!=typeof t||0===t.length)return c;var a=/\+/g;t=t.split(e);var u=1e3;i&&"number"==typeof i.maxKeys&&(u=i.maxKeys);var s=t.length;u>0&&s>u&&(s=u);for(var l=0;l<s;++l){var p,f,d,h,y=t[l].replace(a,"%20"),v=y.indexOf(n);v>=0?(p=y.substr(0,v),f=y.substr(v+1)):(p=y,f=""),d=decodeURIComponent(p),h=decodeURIComponent(f),o(c,d)?r(c[d])?c[d].push(h):c[d]=[c[d],h]:c[d]=h}return c};var r=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)}},function(t,e,n){"use strict";var o=function(t){switch(typeof t){case"string":return t;case"boolean":return t?"true":"false";case"number":return isFinite(t)?t:"";default:return""}};t.exports=function(t,e,n,a){return e=e||"&",n=n||"=",null===t&&(t=void 0),"object"==typeof t?i(c(t),(function(c){var a=encodeURIComponent(o(c))+n;return r(t[c])?i(t[c],(function(t){return a+encodeURIComponent(o(t))})).join(e):a+encodeURIComponent(o(t[c]))})).join(e):a?encodeURIComponent(o(a))+n+encodeURIComponent(o(t)):""};var r=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)};function i(t,e){if(t.map)return t.map(e);for(var n=[],o=0;o<t.length;o++)n.push(e(t[o],o));return n}var c=Object.keys||function(t){var e=[];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.push(n);return e}},function(t,e,n){"use strict";var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))((function(r,i){function c(t){try{u(o.next(t))}catch(t){i(t)}}function a(t){try{u(o.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(c,a)}u((o=o.apply(t,e||[])).next())}))},c=this&&this.__generator||function(t,e){var n,o,r,i,c={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;c;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return c.label++,{value:i[1],done:!1};case 5:c.label++,o=i[1],i=[0];continue;case 7:i=c.ops.pop(),c.trys.pop();continue;default:if(!(r=c.trys,(r=r.length>0&&r[r.length-1])||6!==i[0]&&2!==i[0])){c=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){c.label=i[1];break}if(6===i[0]&&c.label<r[1]){c.label=r[1],r=i;break}if(r&&c.label<r[2]){c.label=r[2],c.ops.push(i);break}r[2]&&c.ops.pop(),c.trys.pop();continue}i=e.call(t,c)}catch(t){i=[6,t],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}};Object.defineProperty(e,"__esModule",{value:!0}),e.ZhsExam=void 0;var a=n(1);n(5);var u=n(12),s=n(7),l=n(4),p=function(){function t(){}return t.prototype.Init=function(){var t=this,e=document.URL.match(/(checkHomework|dohomework|doexamination)\/(.*?)\/(.*?)\/(.*?)\/(.*?)\/(.*?)$/);null!=e?(this.topic=new v(document,new s.ToolsQuestionBankFacade("zhs",{refer:document.URL,id:e[4]})),this.topic.SetQueryQuestions(new f),window.addEventListener("load",(function(){setTimeout((function(){document.oncontextmenu=function(){},document.oncopy=function(){},document.onpaste=function(){},document.onselectstart=function(){},document.querySelectorAll(".examInfo.infoList.clearfix").length<=0?t.createBtn():t.topic.CollectAnswer()}),1e3)}))):window.addEventListener("hashchange",(function(){setTimeout((function(){t.Init(),document.oncontextmenu=function(){},document.oncopy=function(){},document.onpaste=function(){},document.onselectstart=function(){},document.querySelectorAll(".examInfo.infoList.clearfix").length<=0?t.createBtn():t.topic.CollectAnswer()}),1e3)}))},t.prototype.createBtn=function(){if(!(document.querySelectorAll(".zhs-search-answer.green").length>0)){var t=document.querySelector(".examPaper_partTit.mt20 ul"),e=a.createBtn("搜索答案","点击搜索答案","zhs-search-answer green");t.append(e);var n=this;e.onclick=function(){return i(this,void 0,void 0,(function(){var t;return c(this,(function(o){switch(o.label){case 0:return a.protocolPrompt("你正准备使用智慧树答题功能,相应的我们需要你的正确答案,因为智慧树的机制问题,采集答案会导致无法重新作答,你是否愿意贡献你的答案?\n* 本项选择不会影响你的正常使用(协议当前版本有效)\n* 手动点击答题结果页面自动采集页面答案\n* (功能其实还没完成,后续更新)","zhs_answer_collect","我同意"),e.innerText="搜索中...",[4,n.topic.QueryAnswer()];case 1:return t=o.sent(),e.innerText=s.QuestionStatusString(t),[2,!1]}}))}))}}},t}();e.ZhsExam=p;var f=function(){function t(){}return t.prototype.QueryQuestions=function(){var t=this,e=document.querySelectorAll(".examPaper_subject.mt20,.questionType"),n=new Array;return e.forEach((function(e){var o=e.querySelector(".subject_type_annex .subject_type");if(null!=o){var r=s.SwitchTopicType(a.substrex(o.innerHTML,"【","】")),i=t.createQuestion(r,e);n.push(i)}})),n},t.prototype.createQuestion=function(t,e){switch(t){case 1:case 2:return new h(e,t);case 3:return new y(e,t);default:return new h(e,-1)}},t}(),d=function(){function t(t,e){this.el=t,this.type=e}return t.prototype.GetType=function(){return this.type},t.prototype.GetTopic=function(){return this.el.querySelector(".subject_type_describe.fl .subject_describe").innerHTML},t.prototype.removeNotice=function(){this.el.querySelectorAll(".prompt-line-answer").forEach((function(t){t.remove()}))},t.prototype.addNotice=function(t){var e=this.el.querySelector(".subject_node.mt10,.subject_node");l.CreateNoteLine(t,"answer",e)},t.prototype.SetStatus=function(t){this.addNotice(s.TopicStatusString(t))},t.prototype.options=function(){return this.el.querySelectorAll(".subject_node .nodeLab")},t.prototype.getOption=function(t){return t.querySelector(".mr10,span.mr5").innerText.substring(0,1)},t.prototype.click=function(t,e){var n=t.querySelector("input");"none"!=n.nextElementSibling.style.display&&n.parentElement.click(),this.addNotice(this.getOption(t)+":"+e)},t.prototype.getContent=function(t){return t.querySelector(".node_detail.examquestions-answer.fl").innerHTML},t.prototype.defaultAnswer=function(){var t=new s.PushAnswer;return t.topic=this.GetTopic(),t.type=this.GetType(),t.correct=new Array,t.answers=new Array,t},t.prototype.isCorrect=function(){return null!=this.el.querySelector(".key_yes")},t}(),h=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.Random=function(){var t=this.options(),e=a.randNumber(0,t.length-1);return this.click(t[e],this.getContent(t[e])),"random"},e.prototype.Fill=function(t){var e=this;return new Promise((function(n){for(var o=e.options(),r=!1,i=function(n){for(var i=function(i){t.Equal(e.getContent(o[i]),t.correct[n].content)&&(setTimeout((function(){e.click(o[i],t.correct[n].content)}),1e3*n),r=!0)},c=0;c<o.length;c++)i(c)},c=0;c<t.correct.length;c++)i(c);return n(r?"ok":"no_match")}))},e.prototype.Correct=function(){if(!this.isCorrect())return null;for(var t=this.defaultAnswer(),e=this.options(),n=0;n<e.length;n++){var o={option:this.getOption(e[n]),content:this.getContent(e[n])};t.answers.push(o),e[n].querySelector("input").checked&&t.correct.push(o)}return t},e}(d),y=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.Random=function(){var t=this.options();return this.click(t[a.randNumber(0,1)]),"random"},e.prototype.click=function(t){t.querySelector("label > input,input").click(),this.addNotice(this.getContent(t))},e.prototype.Fill=function(t){var e=this;return new Promise((function(n){for(var o=e.options(),r=0;r<o.length;r++)if(e.getContent(o[r])==(t.correct[0].content?"对":"错")){e.click(o[r]);break}return n("ok")}))},e.prototype.Correct=function(){if(!this.isCorrect())return null;var t=this.defaultAnswer(),e="对"==this.getContent(this.el.querySelector("input:checked").parentElement.parentElement);return t.correct.push({option:e,content:e}),t},e}(d),v=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.Init=function(){return null},e.prototype.Submit=function(){return null},e}(u.Topic)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Course163Platform=void 0;var o=n(36),r=n(0),i=function(){function t(){}return t.prototype.CreateMooc=function(){return document.URL.indexOf("www.icourse163.org")>0?(r.Application.App.config.SetNamespace("mooc163"),new o.Course163):null},t}();e.Course163Platform=i},function(t,e,n){"use strict";var o=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))((function(r,i){function c(t){try{u(o.next(t))}catch(t){i(t)}}function a(t){try{u(o.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(c,a)}u((o=o.apply(t,e||[])).next())}))},r=this&&this.__generator||function(t,e){var n,o,r,i,c={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;c;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return c.label++,{value:i[1],done:!1};case 5:c.label++,o=i[1],i=[0];continue;case 7:i=c.ops.pop(),c.trys.pop();continue;default:if(!(r=c.trys,(r=r.length>0&&r[r.length-1])||6!==i[0]&&2!==i[0])){c=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){c.label=i[1];break}if(6===i[0]&&c.label<r[1]){c.label=r[1],r=i;break}if(r&&c.label<r[2]){c.label=r[2],c.ops.push(i);break}r[2]&&c.ops.pop(),c.trys.pop();continue}i=e.call(t,c)}catch(t){i=[6,t],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}};Object.defineProperty(e,"__esModule",{value:!0}),e.Course163=void 0;var i=n(9);n(5);var c=n(0),a=n(37),u=n(1),s=function(){function t(){}return t.prototype.Init=function(){this.hookAjax()},t.prototype.hookAjax=function(){var t=this;i.Hook.HookAjaxRespond(["CourseBean.getLessonUnitLearnVo.dwr","MocQuizBean.getQuizPaperDto.dwr","PostBean.getPaginationReplys.dwr"],(function(e,n){var i=a.TaskFactory.CreateTask(e,n);return i&&setTimeout((function(){return o(t,void 0,void 0,(function(){var t,e=this;return r(this,(function(n){switch(n.label){case 0:return clearInterval(this.delayTimer),this.lastTask?[4,this.lastTask.Stop()]:[3,2];case 1:n.sent(),n.label=2;case 2:return this.lastTask=i,this.lastTask.addEventListener("complete",(function(){e.delay((function(){return o(e,void 0,void 0,(function(){return r(this,(function(t){switch(t.label){case 0:return[4,this.lastTask.Submit()];case 1:return t.sent(),this.nextTask(),[2]}}))}))}))})),[4,this.lastTask.Init()];case 3:return n.sent(),c.Application.App.config.auto?((t=document.querySelector(".j-autoNext"))&&t.checked&&u.UntrustedClick(t),[4,this.lastTask.Start()]):[3,5];case 4:n.sent(),n.label=5;case 5:return[2]}}))}))}),0),n})),i.Hook.HookAjaxRespond("MocQuizBean.fetchQuestions",(function(t,e){return e.indexOf("{questions:s0}")>0&&(e=e.replace("{questions:s0}","{questions:{}}")),e}))},t.prototype.nextTask=function(){var t=this,e=document.querySelectorAll(".j-unitslist.unitslist.f-cb > .f-fl"),n=this.next(e,(function(t){return t.className.indexOf("current")>0}));if(n)return u.UntrustedClick(n);var o=function(e){var n=document.querySelector(".f-fl.j-"+e+" .up.j-up.f-thide"),o=document.querySelectorAll(".f-fl.j-"+e+" .f-bg.j-list > .f-thide");return t.next(o,(function(t){return t.innerText.replace(/\s/g,"")==n.innerText.replace(/\s/g,"")}))};if(n=o("lesson"))return u.UntrustedClick(n);if(n=o("chapter")){u.UntrustedClick(n);var r=document.querySelectorAll(".f-fl.j-lesson .f-bg.j-list > .f-thide");return u.UntrustedClick(r[0])}return c.Application.App.log.Warn("任务结束了"),alert("任务结束了")},t.prototype.next=function(t,e){for(var n=!1,o=0;o<t.length;o++)if(e(t[o]))n=!0;else if(n)return t[o];return null},t.prototype.delay=function(t){var e=c.Application.App.config.interval;c.Application.App.log.Info(e+"分钟后自动切换下一个任务点"),this.delayTimer=setTimeout((function(){c.Application.App.config.auto&&t()}),6e4*e)},t}();e.Course163=s},function(module,exports,__webpack_require__){"use strict";var __extends=this&&this.__extends||(extendStatics=function(t,e){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}extendStatics(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),extendStatics,__awaiter=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))((function(r,i){function c(t){try{u(o.next(t))}catch(t){i(t)}}function a(t){try{u(o.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(c,a)}u((o=o.apply(t,e||[])).next())}))},__generator=this&&this.__generator||function(t,e){var n,o,r,i,c={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;c;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return c.label++,{value:i[1],done:!1};case 5:c.label++,o=i[1],i=[0];continue;case 7:i=c.ops.pop(),c.trys.pop();continue;default:if(!(r=c.trys,(r=r.length>0&&r[r.length-1])||6!==i[0]&&2!==i[0])){c=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){c.label=i[1];break}if(6===i[0]&&c.label<r[1]){c.label=r[1],r=i;break}if(r&&c.label<r[2]){c.label=r[2],c.ops.push(i);break}r[2]&&c.ops.pop(),c.trys.pop();continue}i=e.call(t,c)}catch(t){i=[6,t],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.DiscussTask=exports.CourseTopicTask=exports.VideoTask=exports.NoSupportTask=exports.TaskFactory=void 0;var task_1=__webpack_require__(14),application_1=__webpack_require__(0),utils_1=__webpack_require__(1),question_1=__webpack_require__(38),question_2=__webpack_require__(7),TaskFactory=function(){function TaskFactory(){}return TaskFactory.CreateTask=function(t,e){return e.indexOf("paper:s")>0?(CourseTopicTask.collegeAnswer(this.getvalue(e,e.match(/,paper:(.*?),/)[1])),new CourseTopicTask):e.indexOf('tname:"')>0?(e.indexOf("answers:s")>0&&CourseTopicTask.collegeAnswer(this.getvalue(e,e.match(/,objectiveQList:(.*?),/)[1])),new CourseTopicTask(e)):e.indexOf("videoVo:s")>0?new VideoTask:e.indexOf("list:s")>0&&t.indexOf("PostBean.getPaginationReplys")>0?new DiscussTask(this.getvalue(e,e.match(/,list:(.*?),/)[1])):e.indexOf(",post:s")>0?null:new NoSupportTask},TaskFactory.getvalue=function(str,ret){try{ret=ret||"s0";var script=str.match(/^([\s\S]+?)dwr.engine._remoteHandleCallback/)[1];return script="function a(){"+script+";return "+ret+";}a();",eval(script)}catch(t){application_1.Application.App.log.Error("获取题目发生了一个错误",t)}return null},TaskFactory}();exports.TaskFactory=TaskFactory;var NoSupportTask=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.Start=function(){var t=this;return new Promise((function(e){e(),application_1.Application.App.log.Info("暂不支持的类型,跳过"),t.callEvent("complete")}))},e.prototype.Done=function(){return!0},e.prototype.Type=function(){return"other"},e}(task_1.Task);exports.NoSupportTask=NoSupportTask;var VideoTask=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.Init=function(){var t=this;return new Promise((function(e){t.timer=setInterval((function(){var n=document.querySelector("video[id]");n&&(clearInterval(t.timer),t.video=n,t.video.addEventListener("loadstart",(function(){t.initVideo()})),t.video.addEventListener("ended",(function(){t.callEvent("complete")})),t.callEvent("load"),application_1.Application.App.log.Debug("视频加载完成"),e())}),500)}))},e.prototype.Done=function(){return!1},e.prototype.Stop=function(){var t=this;return new Promise((function(e){clearInterval(t.timer),t.callEvent("stop"),e()}))},e.prototype.initVideo=function(){this.video.muted=application_1.Application.App.config.video_mute,application_1.Application.App.config.video_multiple>1&&(this.video.playbackRate=application_1.Application.App.config.video_multiple)},e.prototype.Start=function(){var t=this;return new Promise((function(e){t.initVideo(),t.video.play(),t.timer=setInterval((function(){application_1.Application.App.config.auto&&t.video.paused&&t.video.play()}),5e3),e()}))},e.prototype.Type=function(){return"video"},e}(task_1.Task);exports.VideoTask=VideoTask;var CourseTopicTask=function(t){function e(n){var o=t.call(this)||this,r="";n&&(r=utils_1.substrex(n,",{aid:",","));var i="";return document.URL.indexOf("cid")>0&&(i="c-"),o.bank=new question_2.ToolsQuestionBankFacade("mooc163",{refer:document.URL,id:i+e.getid(),info:r}),n&&o.bank.CheckCourse(),o}return __extends(e,t),e.getid=function(){var t=document.URL.match(/(\?id|cid)=(.*?)($|&)/);return t||(t=document.URL.match(/(&id)=(.*?)$/)),t?t[2]:""},e.collegeAnswer=function(t){var e=this.getid();if(""!=e){var n="";document.URL.indexOf("cid")>0&&(n="c-");var o,r=new question_2.ToolsQuestionBank("mooc163",{refer:document.URL,id:n+e}),i=new Array;if(null==(o=t.objectiveQList)&&(o=t),null!=o){for(var c=0;c<o.length;c++){var a=o[c];if(1==a.type||2==a.type){if(a.optionDtos){var u=new Array,s=new Array,l=new question_2.PushAnswer;l.topic=a.title,l.type=a.type;for(var p=0;p<a.optionDtos.length;p++){var f={content:a.optionDtos[p].content,option:String.fromCharCode(65+p)};a.optionDtos[p].answer&&s.push(f),u.push(f)}if(s.length<=0)return;l.correct=s,l.answers=u,i.push(l)}}else if(3==a.type){var d=new question_2.PushAnswer;if(d.topic=a.title,d.type=4,d.correct=new Array,!a.stdAnswer)continue;d.correct.push({option:"一",content:a.stdAnswer}),i.push(d)}else if(4==a.type){var h=new question_2.PushAnswer;if(h.topic=a.title,h.type=3,h.correct=new Array,!a.optionDtos)continue;for(var y=0;y<a.optionDtos.length;y++)if(a.optionDtos[y].answer){h.correct.push({option:"正确"==a.optionDtos[y].content,content:"正确"==a.optionDtos[y].content});break}i.push(h)}}r.Push(i)}}},e.prototype.Init=function(){var t=this;return new Promise((function(e){setTimeout((function(){document.querySelector("#tools-search")&&document.querySelector("#tools-search").remove();var n=utils_1.createBtn("搜索答案","点击搜索答案","cx-btn mooc163-search","tools-search"),o=document.querySelector(".j-unitct .m-learnunitUI");o||(o=document.querySelector(".u-learn-moduletitle")),t.topic=new question_1.CourseTopic(document,t.bank),t.topic.SetQueryQuestions(new question_1.CourseQueryAnswer),n.onclick=function(){return __awaiter(t,void 0,void 0,(function(){var t;return __generator(this,(function(e){switch(e.label){case 0:return n.innerText="搜索中...",[4,this.Start()];case 1:return t=e.sent(),n.innerText=question_2.QuestionStatusString(t),[2]}}))}))},o.insertBefore(n,o.firstChild),e()}),1e3)}))},e.prototype.Done=function(){return!1},e.prototype.Type=function(){return"topic"},e.prototype.Start=function(){var t=this;return new Promise((function(e){return __awaiter(t,void 0,void 0,(function(){var t;return __generator(this,(function(n){switch(n.label){case 0:return utils_1.protocolPrompt("你正准备使用中国慕课的答题功能,相应的我们需要你的正确答案,同意之后扩展将自动检索你的所有答案\n* 本项选择不会影响你的正常使用(协议当前版本有效)\n* 手动点击答题结果页面自动采集页面答案\n","course_answer_collect_v2","我同意"),[4,this.topic.QueryAnswer()];case 1:return t=n.sent(),this.callEvent("complete"),e(t),[2]}}))}))}))},e.prototype.Submit=function(){return new Promise((function(t){var e=document.querySelector(".submit.j-submit");"none"==e.style.display&&t(),utils_1.UntrustedClick(e);var n=setInterval((function(){var e=document.querySelector(".submit.j-replay");e&&"none"!=e.style.display&&(clearInterval(n),t())}),1e3)}))},e}(task_1.Task);exports.CourseTopicTask=CourseTopicTask;var DiscussTask=function(t){function e(e){var n=t.call(this)||this;return n.list=e,n}return __extends(e,t),e.prototype.isRepeat=function(){return null==document.querySelector("a.unfollowed")},e.prototype.Start=function(){var t=this;return!this.list&&this.list.lenght<=0?(application_1.Application.App.log.Info("没有查询到记录,跳过"),void this.callEvent("complete")):this.isRepeat()?(application_1.Application.App.log.Info("已经关注,跳过"),void this.callEvent("complete")):(application_1.Application.App.log.Info("复读机开启,准备复读(回复当前本讨论)"),new Promise((function(e){var n=setInterval((function(){try{var o=t.list[utils_1.randNumber(0,t.list.length-1)],r=document.querySelector("iframe[id*=ueditor_]");application_1.Application.GlobalContext.UE.instants["ueditorInstant"+r.id.substr(r.id.indexOf("_")+1)].setContent(o.content)}catch(t){return void 0}clearInterval(n),t.callEvent("complete"),e()}),1e3)})))},e.prototype.Done=function(){return!1},e.prototype.Type=function(){return"other"},e.prototype.Submit=function(){if(!this.isRepeat())return new Promise((function(t){application_1.Application.App.log.Info("准备提交");var e=document.querySelector(".u-btn-sm.u-btn-primary");if(!e)return t();utils_1.UntrustedClick(e),setTimeout((function(){t()}),2e3)}))},e}(task_1.Task);exports.DiscussTask=DiscussTask},function(t,e,n){"use strict";var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))((function(r,i){function c(t){try{u(o.next(t))}catch(t){i(t)}}function a(t){try{u(o.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(c,a)}u((o=o.apply(t,e||[])).next())}))},c=this&&this.__generator||function(t,e){var n,o,r,i,c={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;c;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return c.label++,{value:i[1],done:!1};case 5:c.label++,o=i[1],i=[0];continue;case 7:i=c.ops.pop(),c.trys.pop();continue;default:if(!(r=c.trys,(r=r.length>0&&r[r.length-1])||6!==i[0]&&2!==i[0])){c=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){c.label=i[1];break}if(6===i[0]&&c.label<r[1]){c.label=r[1],r=i;break}if(r&&c.label<r[2]){c.label=r[2],c.ops.push(i);break}r[2]&&c.ops.pop(),c.trys.pop();continue}i=e.call(t,c)}catch(t){i=[6,t],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}};Object.defineProperty(e,"__esModule",{value:!0}),e.CourseTopic=e.CourseQueryAnswer=void 0;var a=n(12),u=n(7),s=n(4),l=n(1),p=n(0),f=function(){function t(){}return t.prototype.QueryQuestions=function(){var t=this,e=new Array;return document.querySelectorAll(".u-questionItem").forEach((function(n){e.push(t.createQuestion(n))})),e},t.prototype.createQuestion=function(t){return t.querySelector(".optionCnt span.u-icon-correct")?new y(t,3):null!=t.querySelector("input[type='radio']")?new d(t,1):null!=t.querySelector("input[type='checkbox']")?new d(t,2):null!=t.querySelector("textarea")?new h(t,4):new d(t,-1)},t}();e.CourseQueryAnswer=f;var d=function(){function t(t,e){this.el=t,this.type=e,this.RemoveNotice()}return t.prototype.GetType=function(){return this.type},t.prototype.GetTopic=function(){return this.dealImgDomain(this.el.querySelector(".f-richEditorText.j-richTxt").innerHTML)},t.prototype.RemoveNotice=function(){this.el.querySelectorAll(".prompt-line-answer").forEach((function(t){t.remove()}))},t.prototype.AddNotice=function(t){s.CreateNoteLine(t,"answer",this.el)},t.prototype.SetStatus=function(t){this.AddNotice(u.TopicStatusString(t))},t.prototype.getContent=function(t){return t.querySelector(".f-fl.optionCnt").innerHTML},t.prototype.getOption=function(t){return t.querySelector(".f-fl.optionPos").innerHTML.substring(0,1)},t.prototype.fill=function(t,e){t.parentElement.querySelector("input").checked||l.UntrustedClick(t.parentElement.querySelector("input")),e=(e=e.replace(/style=".*?"/,"")).replace(/(<p>|<\/p>)/,""),this.AddNotice(this.getOption(t)+":"+e)},t.prototype.Random=function(){var t=this.options(),e=l.randNumber(0,t.length-1);return this.fill(t[e],this.getContent(t[e-1])),"random"},t.prototype.options=function(){return this.el.querySelectorAll(".u-tbl.f-pr.f-cb")},t.prototype.dealImgDomain=function(t){return t=(t=t.replace(/"http(s|):\/\/edu-image.nosdn.127.net\/(.*?)"/,'"http://nos.netease.com/edu-image/$2"')).replace(/"http(s|):\/\/(.*?)\//g,'"')},t.prototype.Fill=function(t){var e=this;return new Promise((function(n){return i(e,void 0,void 0,(function(){var e,o,r,i;return c(this,(function(c){switch(c.label){case 0:e=this.options(),o=!1,r=0,c.label=1;case 1:if(!(r<t.correct.length))return[3,7];i=0,c.label=2;case 2:return i<e.length?t.Equal(this.dealImgDomain(this.getContent(e[i])),this.dealImgDomain(t.correct[r].content))?(this.fill(e[i],t.correct[r].content),2!=this.GetType()||r==t.correct.length-1?[3,4]:[4,l.Sleep(1e3*p.Application.App.config.topic_interval)]):[3,5]:[3,6];case 3:c.sent(),c.label=4;case 4:o=!0,c.label=5;case 5:return i++,[3,2];case 6:return r++,[3,1];case 7:return o?[2,n("ok")]:[2,n("no_match")]}}))}))}))},t.prototype.Correct=function(){return null},t}(),h=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.Random=function(){return"no_support_random"},e.prototype.Fill=function(t){var e=this;return new Promise((function(n){return i(e,void 0,void 0,(function(){var e,o;return c(this,(function(r){return(e=this.el.querySelector("textarea")).focus(),(o=t.correct[0].content.match(/^[\(\[]([\d\.]+),([\d\.]+)[\)\]]$/))?(e.value=((parseFloat(o[1])+parseFloat(o[2]))/2).toString(),this.AddNotice("填空 取值范围:"+t.correct[0].content)):(e.value=t.correct[0].content.split("##%_YZPRLFH_%##")[0],this.AddNotice("填空:"+t.correct[0].content.replace("##%_YZPRLFH_%##"," 或 "))),[2,n("ok")]}))}))}))},e}(d),y=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.Fill=function(t){var e=this;return new Promise((function(n){return i(e,void 0,void 0,(function(){var e;return c(this,(function(o){return e=t.correct[0].content?this.el.querySelector(".u-tbl.f-pr.f-cb .u-icon-correct").parentElement.parentElement:this.el.querySelector(".u-tbl.f-pr.f-cb .u-icon-wrong").parentElement.parentElement,this.fill(e,this.getContent(e)),[2,n("ok")]}))}))}))},e}(d),v=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.Init=function(){return null},e.prototype.Submit=function(){return null},e}(a.Topic);e.CourseTopic=v}]);