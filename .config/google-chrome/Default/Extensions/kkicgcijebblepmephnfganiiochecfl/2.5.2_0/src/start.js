!function(e){var t={};function n(o){if(t[o])return t[o].exports;var r=t[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(o,r,function(t){return e[t]}.bind(null,r));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=39)}({0:function(e,t,n){"use strict";var o=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))((function(r,i){function c(e){try{s(o.next(e))}catch(e){i(e)}}function a(e){try{s(o.throw(e))}catch(e){i(e)}}function s(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(c,a)}s((o=o.apply(e,t||[])).next())}))},r=this&&this.__generator||function(e,t){var n,o,r,i,c={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;c;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return c.label++,{value:i[1],done:!1};case 5:c.label++,o=i[1],i=[0];continue;case 7:i=c.ops.pop(),c.trys.pop();continue;default:if(!(r=c.trys,(r=r.length>0&&r[r.length-1])||6!==i[0]&&2!==i[0])){c=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){c.label=i[1];break}if(6===i[0]&&c.label<r[1]){c.label=r[1],r=i;break}if(r&&c.label<r[2]){c.label=r[2],c.ops.push(i);break}r[2]&&c.ops.pop(),c.trys.pop();continue}i=t.call(e,c)}catch(e){i=[6,e],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.Application=t.AppName=t.Content=t.Frontend=t.Backend=void 0;var i=n(3),c=n(1),a=n(2);t.Backend="backend",t.Frontend="frontend",t.Content="content",t.AppName="cxmooc-tools";var s=function(){function e(t,n,o){e.app=this,e.runEnv=t,this.runEnvSwitch(t),this.launcher=n,this.component=o}return Object.defineProperty(e,"App",{get:function(){return e.app},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"debug",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"prod",{get:function(){return!0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"config",{get:function(){return this.component.get("config")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"log",{get:function(){return this.component.get("logger")},enumerable:!1,configurable:!0}),e.prototype.run=function(){this.launcher.start()},Object.defineProperty(e.prototype,"IsFrontend",{get:function(){return e.IsFrontend},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"IsBackend",{get:function(){return e.IsBackend},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"IsContent",{get:function(){return e.IsContent},enumerable:!1,configurable:!0}),e.prototype.runEnvSwitch=function(n){switch(n){case t.Frontend:e.IsFrontend=!0;break;case t.Backend:e.IsBackend=!0;break;case t.Content:e.IsContent=!0}},Object.defineProperty(e.prototype,"Client",{get:function(){return e.IsFrontend?i.NewChromeClientMessage(t.AppName):i.NewExtensionClientMessage(t.AppName)},enumerable:!1,configurable:!0}),e.CheckUpdate=function(t){e.IsContent?chrome.storage.local.get(["version","enforce","hotversion","url"],(function(e){return o(this,void 0,void 0,(function(){return r(this,(function(n){switch(n.label){case 0:return[4,t(a.SystemConfig.version<e.version,e)];case 1:return n.sent(),[2]}}))}))})):c.HttpUtils.HttpGet(a.SystemConfig.url+"update?ver="+a.SystemConfig.version,{json:!0,success:function(e){return o(this,void 0,void 0,(function(){var n;return r(this,(function(o){switch(o.label){case 0:return n={version:e.version,url:e.url,enforce:e.enforce,hotversion:e.hotversion,injection:e.injection},chrome.storage&&chrome.storage.local.set(n),[4,t(a.SystemConfig.version<n.version,n)];case 1:return o.sent(),[2]}}))}))},error:function(){return o(this,void 0,void 0,(function(){return r(this,(function(e){switch(e.label){case 0:return[4,t(!1,void 0)];case 1:return e.sent(),[2]}}))}))}})},e}();t.Application=s},1:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Sleep=t.UntrustedClick=t.boolToString=t.toBool=t.Noifications=t.isPhone=t.getImageBase64=t.protocolPrompt=t.dealHotVersion=t.substrex=t.removeHTML=t.removeHTMLTag=t.post=t.get=t.createBtn=t.randNumber=t.RemoveInjected=t.syncSetChromeStorageLocal=t.syncGetChromeStorageLocal=t.InjectedBySrc=t.Injected=t.HttpUtils=void 0;var o=n(0),r=function(){function e(){}return e.Request=function(t){o.Application.App.IsBackend?fetch(t.url,t).then((function(e){return t.json?e.json():e.text()})).then((function(e){t.success&&t.success(e)})).catch((function(){t.error&&t.error()})):e.crossDomainRequest(t)},e.errorCode=function(e){if(!e.code)return!1;switch(e.code){case-1:o.Application.App.log.Info(e.msg);break;case-2:o.Application.App.log.Warn(e.msg);break;case 1:return o.Application.App.log.Info(e.msg),!1;default:return!1}return!0},e.crossDomainRequest=function(t){if(window.hasOwnProperty("GM_xmlhttpRequest"))t.data=t.body,t.onreadystatechange=function(n){if(4==n.readyState)if(200==n.status)if(t.json){var o=JSON.parse(n.responseText);if(e.errorCode(o))return void(t.error&&t.error());t.success&&t.success(o)}else t.success&&t.success(n.responseText);else t.error&&t.error()},window.GM_xmlhttpRequest(t);else{var n=o.Application.App.Client;n.Recv((function(n){if(0==n.code){if(t.json&&e.errorCode(n.body))return void(t.error&&t.error());t.success&&t.success(n.body)}else t.error&&t.error()})),n.Send({type:"GM_xmlhttpRequest",info:{url:t.url,method:t.method,json:t.json,body:t.body,headers:t.headers}})}},e.HttpGet=function(e,t){t.url=e,this.Request(t)},e.HttpPost=function(e,t,n){n.url=e,n.body=t,n.headers||(n.headers={}),n.headers["Content-Type"]||(n.headers["Content-Type"]="application/x-www-form-urlencoded"),n.method="POST",this.Request(n)},e.SendRequest=function(t,n){if(n.info){var r=n.info;if(o.Application.App.IsBackend)r.success=function(e){t.Send({body:e,code:0})},r.error=function(){t.Send({code:-1})},e.Request(r);else{var i=o.Application.App.Client;i.Send({type:"GM_xmlhttpRequest",info:r}),i.Recv((function(e){t.Send(e)}))}}},e}();function i(){var e;return(e=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP")).error=function(t){return e.errorCallback=t,e},e.withCredentials=!0,e}t.HttpUtils=r,t.Injected=function(e,t){var n=e.createElement("script");return n.setAttribute("type","text/javascript"),n.innerHTML=t,n.className="injected-js",e.documentElement.appendChild(n),n},t.InjectedBySrc=function(e,t){var n=e.createElement("script");return n.setAttribute("type","text/javascript"),n.src=t,n.className="injected-js",e.documentElement.appendChild(n),n},t.syncGetChromeStorageLocal=function(e){return new Promise((function(t){return chrome.storage.local.get(e,(function(n){t(n[e])}))}))},t.syncSetChromeStorageLocal=function(e,t){var n={};return n[e]=t,new Promise((function(e){return chrome.storage.local.set(n,(function(){e()}))}))},t.RemoveInjected=function(e){for(var t=e.getElementsByClassName("injected-js"),n=0;n<t.length;n++)t[n].remove()},t.randNumber=function(e,t){return Math.floor(Math.random()*(t-e+1)+e)},t.createBtn=function(e,t,n,o){void 0===t&&(t=""),void 0===n&&(n=""),void 0===o&&(o="");var r=document.createElement("button");return r.innerText=e,r.id=o,r.title=t,r.className=n,r},t.get=function(e,t){var n=i();return n.open("GET",e,!0),n.onreadystatechange=function(){4==this.readyState&&(200==this.status?t&&t(this.responseText,this.resource):n.errorCallback&&n.errorCallback(this))},n.send(),n},t.post=function(e,t,n,o){void 0===n&&(n=!0);var r=i();return r.open("POST",e,!0),n?r.setRequestHeader("Content-Type","application/json"):r.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),r.onreadystatechange=function(){4==this.readyState&&(200==this.status?o&&o(this.responseText):r.errorCallback&&r.errorCallback(this))},r.send(t),r},t.removeHTMLTag=function(e){return e=(e=e.replace(/<.*?>/g,"")).replace(/(^\s+)|(\s+$)/g,"")},t.removeHTML=function(e){var t=/<img.*?src="(.*?)".*?>/g;return e=e.replace(t,"$1"),t=/(<iframe.+?>)\s+?(<\/iframe>)/g,e=e.replace(t,"$1$2"),t=/<(iframe|a).*?(src|href)="(.*?)".*?>(.*?)<\/(iframe|a)>/g,(e=(e=(e=(e=e.replace(t,"$3$4")).replace(/<.*?>/g,"")).replace(/(^\s+)|(\s+$)/g,"")).replace(/，/g,",").replace(/（/g,"(").replace(/）/g,")").replace(/？/g,"?").replace(/：/g,":").replace(/。/g,".").replace(/[“”]/g,'"')).replace(/&nbsp;/g," ").replace(/&quot;/g,'"').replace(/&gt;/g,">").replace(/&lt;/g,"<").replace(/&amp;/g,"&").trim()},t.substrex=function(e,t,n){var o=e.indexOf(t)+t.length,r=e.indexOf(n,o);return e.substring(o,r)},t.dealHotVersion=function(e){return e=e.substring(0,e.indexOf(".")+1)+e.substring(e.indexOf(".")+1).replace(".",""),Number(e)},t.protocolPrompt=function(e,t,n){if(n=n||"yes",null==localStorage[t]||1!=localStorage[t]){var o=prompt(e+'\n如果以后不想再弹出本对话框并且同意请在下方填写"'+n+'"');if(null===o)return!1;if(n!=o)return!1;localStorage[t]=1}return!0},t.getImageBase64=function(e,t){var n=document.createElement("canvas");n.width=e.width,n.height=e.height,n.getContext("2d").drawImage(e,0,0,e.width,e.height);var o=n.toDataURL("image/"+t,.75);return n=null,o},t.isPhone=function(){return/Android|iPhone/i.test(navigator.userAgent)},t.Noifications=function(e){window.hasOwnProperty("GM_notification")?window.GM_notification(e):(o.Application.App.Client.Send({type:"GM_notification",details:e}),o.Application.App.Client.Send(e))},t.toBool=function(e){return"boolean"==typeof e?e:"true"==e},t.boolToString=function(e){return e?"true":"false"},t.UntrustedClick=function(e){if(null!=window.CAT_click)return CAT_click(e),!0;var t=new MouseEvent("click",{clientX:10086});return t.isTrusted?e.dispatchEvent(t):(o.Application.App.log.Warn("扩展执行错误"),!1)},t.Sleep=function(e){return new Promise((function(t){setTimeout((function(){t(void 0)}),e)}))}},2:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SystemConfig=void 0;var o=function(){function e(){}return e.version=2.5,e.url="https://cx.icodef.com/",e.hotVersion="2.5.2",e.match={cx:["*://*/mycourse/studentstudy?*","*://*/work/doHomeWorkNew?*","*://*/work/selectWorkQuestionYiPiYue?*","*://*/exam/test/reVersionTestStartNew?*","*://*/ztnodedetailcontroller/visitnodedetail?*","*://*/antispiderShowVerify.ac*","*://*/html/processVerify.ac?*","*://*/exam/test/reVersionPaperMarkContentNew?*","*://*/ananas/modules/*/index.html?*","*://*/exam/test?*","*://*/course/*.html?*"],zhs:["*://examh5.zhihuishu.com/stuExamWeb.html*","*://onlineexamh5new.zhihuishu.com/stuExamWeb.html*","*://studyh5.zhihuishu.com/videoStudy.html*"],mooc163:["*://www.icourse163.org/learn/*","*://www.icourse163.org/spoc/learn/*"]},e.config={cx:{name:"超星",items:[{title:"随机答案",description:"如果题库没有正确的答案会随机选择",type:"checkbox",key:"rand_answer",value:!1},{title:"自动挂机",description:"进入一个页面就会自动开始挂机,完成一个任务之后会自动进行下一个",type:"checkbox",key:"auto",value:!0},{title:"视频静音",description:"播放视频时,自动开启静音",type:"checkbox",key:"video_mute",value:!0},{title:"忽略题目",description:"自动挂机时,忽略掉题目不做,直接跳过",type:"checkbox",key:"answer_ignore",value:!1},{title:"超级模式",description:"超星平台下,超级模式会自动将flash播放器换成h5播放器",type:"checkbox",key:"super_mode",value:!0},{title:"播放源",description:"锁定视频播放源,为空为记录最后一次选中的源(公网1,公网2等)",type:"text",key:"video_cdn",value:"默认"},{title:"播放倍速",description:"视频播放的倍数,1为正常速度(最高16倍,该功能有一定危险)",type:"text",key:"video_multiple",prompt:"这是一个很危险的功能,建议不要进行调整,如果你想调整播放速度请在下方填写yes(智慧树平台播放速度和视频进度无关,最高只能1.5倍速)",unit:"倍",value:"1"},{title:"跳转间隔",description:"视频(题目,任务点)完成后n分钟再继续下一个任务,可以有小数点,例如:0.5=30秒",type:"text",key:"interval",unit:"分",value:"1"},{title:"做题间隔",description:"每一道题之间填写答案的时间间隔",type:"text",key:"topic_interval",unit:"秒",value:"5"}]},zhs:{name:"智慧树",items:[{title:"随机答案",description:"如果题库没有正确的答案会随机选择",type:"checkbox",key:"rand_answer",value:!1},{title:"自动挂机",description:"进入一个页面就会自动开始挂机,完成一个任务之后会自动进行下一个",type:"checkbox",key:"auto",value:!0},{title:"视频静音",description:"播放视频时,自动开启静音",type:"checkbox",key:"video_mute",value:!0},{title:"超级模式",description:"智慧树平台下,超级模式会让任务完成的倍速成真",type:"checkbox",key:"super_mode",value:!0},{title:"播放倍速",description:"视频播放的倍数,1为正常速度(最高16倍,该功能有一定危险)",type:"text",key:"video_multiple",prompt:"这是一个很危险的功能,建议不要进行调整,如果你想调整播放速度请在下方填写yes(智慧树平台播放速度和视频进度无关,最高只能1.5倍速)",unit:"倍",value:"1"},{title:"跳转间隔",description:"视频完成后n分钟再继续播放下一个,可以有小数点,例如:0.5=30秒",type:"text",key:"interval",unit:"分",value:"1"},{title:"做题间隔",description:"每一道题之间填写答案的时间间隔",type:"text",key:"topic_interval",unit:"秒",value:"5"}]},mooc163:{name:"中国大学MOOC",items:[{title:"随机答案",description:"如果题库没有正确的答案会随机选择",type:"checkbox",key:"rand_answer",value:!1},{title:"自动挂机",description:"进入一个页面就会自动开始挂机,完成一个任务之后会自动进行下一个",type:"checkbox",key:"auto",value:!0},{title:"视频静音",description:"播放视频时,自动开启静音",type:"checkbox",key:"video_mute",value:!0},{title:"忽略题目",description:"自动挂机时,忽略掉题目不做,直接跳过",type:"checkbox",key:"answer_ignore",value:!1},{title:"播放倍速",description:"视频播放的倍数,1为正常速度(最高16倍,该功能有一定危险)",type:"text",key:"video_multiple",prompt:"这是一个很危险的功能,建议不要进行调整,如果你想调整播放速度请在下方填写yes(智慧树平台播放速度和视频进度无关,最高只能1.5倍速)",unit:"倍",value:"1"},{title:"跳转间隔",description:"视频完成后n分钟再继续播放下一个,可以有小数点,例如:0.5=30秒",type:"text",key:"interval",unit:"分",value:"1"},{title:"做题间隔",description:"每一道题之间填写答案的时间间隔",type:"text",key:"topic_interval",unit:"秒",value:"5"}]}},e}();t.SystemConfig=o},3:function(e,t,n){"use strict";var o,r=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.NewChromeClientMessage=t.NewChromeServerMessage=t.NewExtensionClientMessage=t.NewExtensionServerMessage=void 0,t.NewExtensionServerMessage=function(e){return new i(e)};var i=function(){function e(e){this.port=e,this.recv()}return e.prototype.recv=function(){var e=this;chrome.runtime.onConnect.addListener((function(t){t.name==e.port&&t.onMessage.addListener((function(n){e.acceptCallback(new a(t),n)}))}))},e.prototype.Accept=function(e){this.acceptCallback=e},e}(),c=function(){function e(e){this.tag=e}return e.prototype.Recv=function(e){this.recvCallback=e},e}();t.NewExtensionClientMessage=function(e){return new a(e)};var a=function(e){function t(t){var n=this;return"string"==typeof t?(n=e.call(this,t)||this).connect():n.conn=t,n.recv(),n}return r(t,e),t.prototype.connect=function(){this.conn=chrome.runtime.connect({name:this.tag})},t.prototype.recv=function(){var e=this;this.conn.onMessage.addListener((function(t){e.recvCallback(t)}))},t.prototype.Send=function(e){this.conn.postMessage(e)},t}(c);t.NewChromeServerMessage=function(e){return new s(e)};var s=function(){function e(e){this.tag=e,this.recv()}return e.prototype.recv=function(){var e=this;window.addEventListener("message",(function(t){t.data.tag==e.tag&&t.data.conn_tag&&"client"==t.data.source&&e.acceptCallback(new u(e.tag,t.data.conn_tag),t.data.msg)}))},e.prototype.Accept=function(e){this.acceptCallback=e},e}();t.NewChromeClientMessage=function(e){return new u(e)};var u=function(e){function t(t,n){var o=this;return void 0!==n?((o=e.call(this,t)||this).connTag=n,o.source="server"):((o=e.call(this,t)||this).connect(),o.source="client"),o}return r(t,e),t.prototype.connect=function(){var e=this;this.connTag=Math.random(),window.addEventListener("message",(function(t){t.data.tag==e.tag&&t.data.conn_tag==e.connTag&&"server"==t.data.source&&e.recvCallback&&e.recvCallback(t.data.msg)}))},t.prototype.Send=function(e){window.postMessage({tag:this.tag,conn_tag:this.connTag,msg:e,source:this.source},"*")},t}(c)},39:function(e,t,n){"use strict";var o=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))((function(r,i){function c(e){try{s(o.next(e))}catch(e){i(e)}}function a(e){try{s(o.throw(e))}catch(e){i(e)}}function s(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(c,a)}s((o=o.apply(e,t||[])).next())}))},r=this&&this.__generator||function(e,t){var n,o,r,i,c={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;c;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return c.label++,{value:i[1],done:!1};case 5:c.label++,o=i[1],i=[0];continue;case 7:i=c.ops.pop(),c.trys.pop();continue;default:if(!(r=c.trys,(r=r.length>0&&r[r.length-1])||6!==i[0]&&2!==i[0])){c=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){c.label=i[1];break}if(6===i[0]&&c.label<r[1]){c.label=r[1],r=i;break}if(r&&c.label<r[2]){c.label=r[2],c.ops.push(i);break}r[2]&&c.ops.pop(),c.trys.pop();continue}i=t.call(e,c)}catch(e){i=[6,e],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}};Object.defineProperty(t,"__esModule",{value:!0});var i=n(3),c=n(1),a=n(0),s=n(6),u=n(8),l=function(){function e(){}return e.prototype.start=function(){return o(this,void 0,void 0,(function(){var e,t,n;return r(this,(function(o){switch(o.label){case 0:return a.Application.App.debug?(n=(t=JSON).stringify,[4,a.Application.App.config.ConfigList()]):[3,2];case 1:return e=n.apply(t,[o.sent()]),c.get(chrome.extension.getURL("src/mooc.js"),(function(t){c.Injected(document,"window.configData="+e+";\n"+t)})),[3,3];case 2:chrome.runtime.sendMessage({status:"loading"}),o.label=3;case 3:return i.NewChromeServerMessage("cxmooc-tools").Accept((function(e,t){switch(t.type){case"GM_xmlhttpRequest":c.HttpUtils.SendRequest(e,t);break;case"GM_notification":c.Noifications(t.details);break;case"GM_setValue":a.Application.App.Client.Send({type:"GM_setValue",details:t.details})}})),chrome.runtime.onMessage.addListener((function(e){e.type&&"cxconfig"==e.type&&window.postMessage({type:"cxconfig",key:e.key,value:e.value},"/")})),a.Application.CheckUpdate((function(e,t){if(e&&t.enforce)return alert("刷课扩展要求强制更新"),void window.open(t.url)})),[2]}}))}))},e}();!function(){o(this,void 0,void 0,(function(){var e,t,n,o,i;return r(this,(function(r){switch(r.label){case 0:return n=(t=new Map).set,o=["config"],i=s.ChromeConfigItems.bind,[4,s.NewBackendConfig()];case 1:return e=n.apply(t,o.concat([new(i.apply(s.ChromeConfigItems,[void 0,r.sent()]))])).set("logger",new u.ConsoleLog),new a.Application(a.Content,new l,e).run(),[2]}}))}))}()},5:function(e,t){window.addEventListener("load",(function(){var e=document.createElement("style");e.innerHTML='\n@keyframes aniripple  \n{\n    0%{\n        width:0px;\n        height:0px;\n        opacity:0.4;\n    }\n    100%{\n        width:500px;\n        height:500px;\n        opacity:0;\n    }\n}  \n\n#cxtools {\n    position: absolute;\n    left: 250px;\n    top: 2px;\n    width: 210px;\n    font-size: 0;\n}\n\n.cx-btn {\n    outline: none;\n    border: 0;\n    background: #7d9d35;\n    color: #fff;\n    border-radius: 4px;\n    padding: 2px 8px;\n    cursor: pointer;\n    font-size: 12px;\n    margin-left: 4px;\n}\n\n.cx-btn:hover {\n    box-shadow: 1px 1px 1px 1px #ccc;\n}\n\n.zhs-tools-btn {\n    color: #fff;\n    background: #ff9d34;\n    padding: 4px;\n    display: inline-block;\n    height: 24px;\n    font-size: 14px;\n    line-height: 24px;\n    margin:0;\n    cursor:pointer;\n}\n.btn-ripple{\n    position:absolute;\n    background:#000;\n    pointer-events:none;\n    transform:translate(-50%,-50%);\n    border-radius:50%;\n    animation:aniripple 1s linear infinite;\n}\n\n.zhs-start-btn{\n    background: #36ac36;\n}\n\n.zhs-start-btn:hover{\n    background: #3b8d3b;\n}\n\n#zhs-ytbn {\n    color: #fff;\n    background: #e777ff;\n}\n\n#zhs-ytbn:hover {\n    background: #e7b7f1;\n}\n\n.zhs-search-answer {\n    border: 0;\n    outline: none;\n    padding: 4px;\n}\n\n.zhs-search-answer:hover {\n    opacity: .85;\n}\n\n.mooc163-search{\n    background-color: #60b900;\n    display: block;\n    margin: 0 auto;\n}\n\n.tools-logger-panel{\n    width: 360px;\n    height: auto;\n    max-height: 260px;\n    color:#000;\n    position: fixed;\n    margin: 0 auto;\n    display: block;\n    font-size: 14px;\n    border-radius: 4px;\n    width: 340px;\n    text-align: center;\n    overflow: hidden;\n    left:60px;\n    top: 40px;\n    z-index: 100000;\n    background: rgba(256, 256, 256, 0.3);\n    box-shadow: 0px 0px 5px #bbb;\n}\n\n.head {\n    width: 100%;\n    height: 30px;\n    padding: 4px;\n    box-sizing: border-box;\n    cursor: move;\n    transition-property: opacity, background-color;\n    transition: 200ms ease-in-out;\n}\n\n.head span{\n    color:#000;\n    float:left;\n    font-weight: 550;\n}\n\n.status {\n    color: #67C23A;\n    font-weight: 600;\n}\n\n.tools-notice-content {\n    width: 100%;\n    height: 220px;\n    border-top:0px;\n    overflow-y: scroll;\n    overflow-x: hidden;\n}\n\n.tools-notice-content .log {\n    height: auto;\n    width: auto;\n    text-align: center;\n    border: 1px solid #eee;\n    overflow: hidden;\n}\n\n.tools-notice-content .log p {\n    margin: 0;\n    color: #aaa;\n    font-size: 11px;\n    font-weight: 500;\n    font-family: Arial, Helvetica, sans-serif;\n    line-height: 26px;\n}\n\n/* 滚动槽 */\n::-webkit-scrollbar {\n    width: 10px;\n    height: 10px;\n}\n\n::-webkit-scrollbar-track {\n    border-radius: 3px;\n    background: rgba(0, 0, 0, 0.06);\n    -webkit-box-shadow: inset 0 0 5px rgba(0, 0, 0, 0.08);\n}\n\n/* 滚动条滑块 */\n::-webkit-scrollbar-thumb {\n    border-radius: 3px;\n    background: rgba(0, 0, 0, 0.12);\n    -webkit-box-shadow: inset 0 0 10px rgba(0, 0, 0, 0.2);\n}\n\n/* 复选框 */\n.switch {\n    margin: 2px auto;\n    display: inline-flex;\n    align-items: center;\n    width: auto;\n}\n.checkbox-input {\n    display: none\n}\n.checkbox {\n    -webkit-transition: background-color 0.3s;\n    transition: background-color 0.3s;\n    background-color: #fff;\n    border: 1px solid #d7d7d7;\n    border-radius: 50px;\n    width: 16px;\n    height: 16px;\n    vertical-align:middle;\n    margin: 0 5px;\n}\n.checkbox-input:checked+.checkbox {\n    background-color: #409EFF;\n}\n.checkbox-input:checked+.checkbox:after {\n    // content: "√";\n    display: inline-block;\n    height: 100%;\n    width: 100%;\n    color: #fff;\n    text-align: center;\n    line-height: 16px;\n    font-size: 12px;\n    box-shadow: 0 0 4px #409EFF;\n}\n\n.tools-logger-panel:hover,\n.tools-logger-panel:focus-within {\n    background: rgba(256, 256, 256, 0.7);\n}\n\n.tools-logger-panel .head:active {\n    background-color: #E5E5E5;\n}\n\n.tools-logger-panel > .close {\n    margin: 2px;\n}\n\n',document.body.appendChild(e)}))},6:function(e,t,n){"use strict";var o=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))((function(r,i){function c(e){try{s(o.next(e))}catch(e){i(e)}}function a(e){try{s(o.throw(e))}catch(e){i(e)}}function s(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(c,a)}s((o=o.apply(e,t||[])).next())}))},r=this&&this.__generator||function(e,t){var n,o,r,i,c={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;c;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return c.label++,{value:i[1],done:!1};case 5:c.label++,o=i[1],i=[0];continue;case 7:i=c.ops.pop(),c.trys.pop();continue;default:if(!(r=c.trys,(r=r.length>0&&r[r.length-1])||6!==i[0]&&2!==i[0])){c=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){c.label=i[1];break}if(6===i[0]&&c.label<r[1]){c.label=r[1],r=i;break}if(r&&c.label<r[2]){c.label=r[2],c.ops.push(i);break}r[2]&&c.ops.pop(),c.trys.pop();continue}i=t.call(e,c)}catch(e){i=[6,e],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.NewFrontendGetConfig=t.NewBackendConfig=t.ChromeConfigItems=void 0;var i=n(1),c=n(0),a=n(2),s=new Map;for(var u in s.set("vtoken",""),a.SystemConfig.config)for(var l=0;l<a.SystemConfig.config[u].items.length;l++)s.set(u+"_"+a.SystemConfig.config[u].items[l].key,a.SystemConfig.config[u].items[l].value);var p=function(){function e(e){var t=this;this.Namespace="",this.config=e;var n=[];s.forEach((function(e,t){n.push(t)})),this.config.Watch(n,(function(e,n){t.localCache[e]=n})),this.localCache=localStorage}return e.prototype.SetNamespace=function(e){this.Namespace=e+"_"},e.prototype.ConfigList=function(){return this.config.ConfigList()},e.prototype.SetNamespaceConfig=function(e,t,n){return this.config.SetConfig(e+"_"+t,n)},e.prototype.GetNamespaceConfig=function(e,t,n){return this.config.GetConfig(e+"_"+t,n)},e.prototype.GetConfig=function(e,t){var n=this.config.GetConfig(this.Namespace+e);return null==n?this.config.GetConfig(e,t):n||t},e.prototype.Watch=function(e,t){this.config.Watch(e,t)},Object.defineProperty(e.prototype,"super_mode",{get:function(){return i.toBool(this.GetConfig("super_mode","true"))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"vtoken",{get:function(){return this.GetConfig("vtoken","")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rand_answer",{get:function(){return i.toBool(this.GetConfig("rand_answer","false"))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"auto",{get:function(){return i.toBool(this.GetConfig("auto","true"))},set:function(e){this.SetConfig("auto",i.boolToString(e))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"video_mute",{get:function(){return i.toBool(this.GetConfig("video_mute","true"))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"answer_ignore",{get:function(){return i.toBool(this.GetConfig("answer_ignore","false"))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"video_cdn",{get:function(){var e=this.GetConfig("video_cdn");return"默认"==e?"":e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"video_multiple",{get:function(){return parseFloat(this.GetConfig("video_multiple"))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"interval",{get:function(){var e=parseFloat(this.GetConfig("interval","0.1"));return e*=100,Math.floor(i.randNumber(e-e/2,e+e/2))/100},enumerable:!1,configurable:!0}),e.prototype.SetConfig=function(e,t){return this.config.SetConfig(this.Namespace+e,t)},Object.defineProperty(e.prototype,"topic_interval",{get:function(){return parseInt(this.GetConfig("topic_interval","5"))},set:function(e){this.SetConfig("topic_interval",e)},enumerable:!1,configurable:!0}),e}();t.ChromeConfigItems=p,t.NewBackendConfig=function(){var e=this;return new Promise((function(t){return o(e,void 0,void 0,(function(){var e;return r(this,(function(n){switch(n.label){case 0:return[4,(e=new d).updateCache()];case 1:return n.sent(),t(e),[2]}}))}))}))};var f=function(){function e(){this.watchCallback=new Map}return e.prototype.WatchEvent=function(e,t){var n=this.watchCallback.get(e);null!=n&&n.forEach((function(n){n(e,t)})),null!=(n=this.watchCallback.get("*"))&&n.forEach((function(n){n(e,t)}))},e.prototype.Watch=function(e,t){var n=this;"string"!=typeof e?e.forEach((function(e,o){n.setWatchMap(e,t)})):this.setWatchMap(e,t)},e.prototype.setWatchMap=function(e,t){var n=this.watchCallback.get(e);null==n&&(n=new Array),n.push(t),this.watchCallback.set(e,n)},e}(),d=function(){function e(){var e=this;this.watch=new f,chrome.runtime.onMessage.addListener((function(t){t.type&&"cxconfig"==t.type&&(e.cache[t.key]=t.value,e.watch.WatchEvent(t.key,t.value),e.updateConfigStorage())}))}return e.prototype.updateConfigStorage=function(){var e=JSON.stringify(this.cache);chrome.storage.sync.set({config_storage:e})},e.prototype.updateCache=function(){var e=this;return new Promise((function(t){chrome.storage.sync.get("config_storage",(function(n){n.config_storage?e.cache=JSON.parse(n.config_storage):e.cache={},s.forEach((function(t,n){void 0===e.cache[n]&&(e.cache[n]=t)})),e.updateConfigStorage(),t(void 0)}))}))},e.prototype.GetConfig=function(e,t){return null==this.cache?(c.Application.App.log.Fatal("缓存失败!!!"),""):this.cache[e]||t},e.prototype.Watch=function(e,t){return this.watch.Watch(e,t)},e.prototype.SetConfig=function(e,t){var n=this;return new Promise((function(o){n.cache[e]=t,chrome.tabs.query({active:!0,currentWindow:!0},(function(n){chrome.tabs.sendMessage(n[0].id,{type:"cxconfig",key:e,value:t})})),chrome.runtime.sendMessage({type:"cxconfig",key:e,value:t}),n.updateConfigStorage(),o(void 0)}))},e.prototype.ConfigList=function(){var e=this;return new Promise((function(t){return o(e,void 0,void 0,(function(){return r(this,(function(e){switch(e.label){case 0:return this.cache?[2,t(this.cache)]:[4,this.updateCache()];case 1:return e.sent(),t(this.cache),[2]}}))}))}))},e}();t.NewFrontendGetConfig=function(){return new h};var h=function(){function e(){var e=this;this.watch=new f,this.cache=window.configData||localStorage,window.addEventListener("message",(function(t){t.data.type&&"cxconfig"==t.data.type&&(c.Application.App.log.Info("配置更新:"+t.data.key+"="+t.data.value),e.cache[t.data.key]=t.data.value,e.watch.WatchEvent(t.data.key,t.data.value))}))}return e.prototype.GetConfig=function(e,t){return window.GM_getValue?window.GM_getValue(e,t):this.cache[e]||t},e.prototype.Watch=function(e,t){return this.watch.Watch(e,t)},e.prototype.SetConfig=function(e,t){return o(this,void 0,void 0,(function(){return r(this,(function(n){return this.cache[e]=t,window.GM_setValue?[2,window.GM_setValue(e,t)]:[2,c.Application.App.Client.Send({type:"GM_setValue",details:{key:e,val:t}})]}))}))},e.prototype.ConfigList=function(){return this.cache},e}()},8:function(e,t,n){"use strict";var o=this&&this.__spreadArrays||function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var o=Array(e),r=0;for(t=0;t<n;t++)for(var i=arguments[t],c=0,a=i.length;c<a;c++,r++)o[r]=i[c];return o};Object.defineProperty(t,"__esModule",{value:!0}),t.EmptyLog=t.PageLog=t.ConsoleLog=void 0;var r=n(0);n(5);var i=n(1),c=function(){function e(){}return e.prototype.getNowTime=function(){var e=new Date;return e.getHours()+":"+e.getMinutes()+":"+e.getSeconds()},e.prototype.Debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return r.Application.App.debug&&console.info.apply(console,o(["[debug",this.getNowTime(),"]"],e)),this},e.prototype.Info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return r.Application.App.debug&&console.info.apply(console,o(["[info",this.getNowTime(),"]"],e)),this},e.prototype.Warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return console.warn.apply(console,o(["[warn",this.getNowTime(),"]"],e)),this},e.prototype.Error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return console.error.apply(console,o(["[error",this.getNowTime(),"]"],e)),this},e.prototype.Fatal=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return console.error.apply(console,o(["[fatal",this.getNowTime(),"]"],e)),this},e}();t.ConsoleLog=c;var a=function(){function e(){var e=this;this.el=void 0,window.addEventListener("load",(function(){e.div=document.createElement("div"),e.div.innerHTML='\n            <div class="head" id="tools-head"> \n               <span>小工具通知条</span> \n               <label class="switch" style="width:90px">\n                  <input class="checkbox-input" id="checkbox" type="checkbox" checked="checked">\n                  <label class="checkbox" for="checkbox"></label>\n                  <span>桌面通知</span>\n               </label>\n               <span class="close" style="float:right; cursor:pointer; margin-right:5px;">x</span>\n            </div>\n            <div class="main">\n               <div class="tools-notice-content"></div>\n            </div>\n            ',e.div.className="tools-logger-panel",document.body.appendChild(e.div),e.el=e.div.querySelector(".tools-notice-content"),e.div.querySelector(".close").onclick=function(){e.el=void 0,e.div.remove()};var t=e.div.querySelector("#checkbox");t.checked="true"==(r.Application.App.config.GetConfig("is_notify")||"true"),e.is_notify=t.checked,t.checked||t.removeAttribute("checked");var n=e;function o(e,t){return parseInt(window.getComputedStyle(e)[t])}t.addEventListener("change",(function(){n.is_notify=this.checked,r.Application.App.config.SetConfig("is_notify",this.checked.toString())})),setTimeout((function(){r.Application.CheckUpdate((function(t,n){if(null!=n){var o="";t&&(o+="<span>[有新版本]</span>"),o+=n.injection,e.Info(o)}else e.Info("检查更新失败.")}))}),1e3);var i=window.innerWidth,c=window.innerHeight,a=o(e.div,"width"),s=o(e.div,"height"),u=parseInt(r.Application.App.config.GetConfig("notify_tools_x").replace("px",""));u<0&&(u=0),u>=i-a&&(u=i-a),e.div.style.left=u+"px";var l=parseInt(r.Application.App.config.GetConfig("notify_tools_y").replace("px",""));l<0&&(l=0),l>=c-s&&(l=c-s),e.div.style.top=l+"px",e.div.querySelector("#tools-head").onmousedown=function(t){var n=t.clientX-e.div.offsetLeft,i=t.clientY-e.div.offsetTop,c=window.innerWidth,a=window.innerHeight,s=o(e.div,"width"),u=o(e.div,"height");document.onmousemove=function(t){var o=t.clientX-n,r=t.clientY-i;o<=0&&(o=0),r<=0&&(r=0),o>=c-s&&(o=c-s),r>=a-u&&(r=a-u),e.div.style.left=o+"px",e.div.style.top=r+"px"},document.onmouseup=function(){document.onmouseup=null,document.onmousemove=null,r.Application.App.config.SetConfig("notify_tools_x",e.div.style.left),r.Application.App.config.SetConfig("notify_tools_y",e.div.style.top)}}}))}return e.prototype.getNowTime=function(){var e=new Date;return e.getHours()+":"+e.getMinutes()+":"+e.getSeconds()},e.prototype.first=function(e,t,n){var o=document.createElement("div");o.innerHTML='\n                <div class="log" style="border-color: '+n+"; background-color: "+n+';">\n                    <p><span style="color:'+t+';">'+e+"</span></p>\n                </div>\n            ";var r=document.getElementsByClassName("tools-notice-content")[0].getElementsByTagName("div");document.querySelector(".tools-notice-content").insertBefore(o,r[0])},e.prototype.toStr=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n="",o=0;o<e.length;o++)"object"==typeof e[o]?n+=e[o].toString()+"\n":n+=e[o]+"\n";return n.substring(0,n.length-1)},e.prototype.Debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return console.info.apply(console,o(["[debug",this.getNowTime(),"]"],e)),this},e.prototype.Info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=this.toStr.apply(this,e);return this.el?this.first(n,"#409EFF","rgba(121, 187, 255, 0.2)"):console.info.apply(console,o(["[info",this.getNowTime(),"]"],e)),this},e.prototype.Warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=this.toStr.apply(this,e);return this.el&&this.first(n,"#5C3C00","rgba(250, 236, 216, 0.4)"),console.warn.apply(console,o(["[warn",this.getNowTime(),"]"],e)),document.hidden&&"true"==localStorage.is_notify&&i.Noifications({title:"网课小工具",text:n+"\n3秒后自动关闭",timeout:3e3}),this},e.prototype.Error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=this.toStr.apply(this,e);return this.el&&this.first(n,"#FFF0F0","rgba(253, 226, 226, 0.5)"),console.error.apply(console,o(["[error",this.getNowTime(),"]"],e)),"true"==localStorage.is_notify&&i.Noifications({title:"网课小工具",text:n}),this},e.prototype.Fatal=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=this.toStr.apply(this,e);return this.el&&this.first(n,"#ff0000","rgba(253, 226, 226, 0.5)"),console.error.apply(console,o(["[fatal",this.getNowTime(),"]"],e)),i.Noifications({title:"网课小工具",text:n}),this},e}();t.PageLog=a;var s=function(){function e(){}return e.prototype.Debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return this},e.prototype.Info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return this},e.prototype.Warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return this},e.prototype.Error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return this},e.prototype.Fatal=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return this},e}();t.EmptyLog=s}});